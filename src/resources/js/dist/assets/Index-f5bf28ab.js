import{c as N,a as E,g as I,d as V}from"./ResourceService-eb2a19c9.js";import{v as z}from"./helpers-6321440c.js";import{d as y,o as _,c as M,g as s,t as w,p as L,u as C,b as c,j as U,w as R,s as $,a as d,z as O,A as T,f as A,r as q,F as D,h as P,i as G}from"./index-3f981e9e.js";import{_ as B}from"./Modal.vue_vue_type_script_setup_true_lang-05d6641e.js";import{_ as H}from"./Dialog.vue_vue_type_script_setup_true_lang-3b4fc477.js";import{R as J}from"./ResourcePreview-94c69348.js";const K={class:"flex flex-col gap-4"},Q={class:"flex flex-col gap-2 w-full"},W={class:"label"},X=["value","placeholder"],Y={class:"flex flex-col gap-2 w-full"},Z={class:"label"},ee=["required","placeholder"],j=y({__name:"Form",props:{name:{type:String,required:!0},file:{type:[Object,null],default:null},fileRequired:{type:Boolean,default:!1}},emits:["update:name","update:file"],setup(p,{emit:m}){const o=m,l=e=>{var t;e&&o("update:file",((t=e.files)==null?void 0:t[0])??null)};return(e,t)=>(_(),M("div",K,[s("div",Q,[s("label",W,w(e.$t("resources.labels.resourceName")),1),s("input",{type:"text",value:p.name,required:"",onInput:t[0]||(t[0]=a=>e.$emit("update:name",L(z)(a.target))),class:"input",placeholder:e.$t("resources.placeholders.resourceName")},null,40,X)]),s("div",Y,[s("label",Z,w(e.$t("resources.labels.resourceFile")),1),s("input",{type:"file",required:p.fileRequired,onChange:t[1]||(t[1]=a=>l(a.target)),class:"input",placeholder:e.$t("resources.placeholders.resourceFile"),accept:"image/jpeg,image/svg+xml,image/png,image/webp,video/mp4,application/pdf,image/gif,application/vnd.rar,application/x-7z-compressed,font/woff,font/woff2,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,font/ttf,image/vnd.microsoft.icon"},null,40,ee)])]))}}),te=y({__name:"Create",props:{showModal:{type:Boolean,required:!0}},emits:["created","update:showModal"],setup(p,{emit:m}){const{t:o}=C(),l=c(""),e=c(void 0),t=m,a=()=>{N({name:l.value,file:e.value}).then(()=>{$({title:o("toasts.success"),message:o("resources.toasts.created"),type:"success"}),t("created"),l.value=""}).catch(()=>{$({title:o("toasts.error"),message:o("resources.toasts.errorCreated"),type:"error"})})};return(h,n)=>(_(),U(B,{title:h.$t("resources.titles.createResource"),showModal:p.showModal,onClose:n[2]||(n[2]=f=>h.$emit("update:showModal",!1)),onConfirm:a},{default:R(()=>[d(j,{name:l.value,"onUpdate:name":n[0]||(n[0]=f=>l.value=f),file:e.value,"onUpdate:file":n[1]||(n[1]=f=>e.value=f),fileRequired:!0},null,8,["name","file"])]),_:1},8,["title","showModal"]))}}),se=y({__name:"Edit",props:{selectedResource:{type:Object,required:!0},showModal:{type:Boolean,required:!0}},emits:["updated","update:selectedResource","update:showModal"],setup(p,{emit:m}){const{t:o}=C(),l=p,e=c(""),t=c(void 0),a=m,h=()=>{n.value&&E({id:n.value.id,name:e.value,file:t.value}).then(()=>{$({title:o("toasts.success"),message:o("resources.toasts.created"),type:"success"}),a("updated"),e.value=""}).catch(()=>{$({title:o("toasts.error"),message:o("resources.toasts.errorCreated"),type:"error"})})},{selectedResource:n}=O(l),f=()=>{a("update:selectedResource",null),a("update:showModal",!1)};return T(n,i=>{e.value=(i==null?void 0:i.name)||""}),(i,g)=>(_(),U(B,{title:i.$t("resources.titles.updateResource"),showModal:p.showModal,onClose:f,onConfirm:h},{default:R(()=>[d(j,{name:e.value,"onUpdate:name":g[0]||(g[0]=b=>e.value=b),file:t.value,"onUpdate:file":g[1]||(g[1]=b=>t.value=b)},null,8,["name","file"])]),_:1},8,["title","showModal"]))}}),oe={class:"flex flex-col gap-4 h-screen py-2"},ae={class:"title"},le={class:"flex gap-2"},ne={class:"grid grid-cols-5 gap-4"},re={class:"flex"},ue={type:"button",class:"button primary w-full flex flex-col items-center justify-between"},ie={class:"flex w-full justify-between mt-4"},de={class:"font-semibold"},ce={class:"flex gap-2"},pe=["onClick"],me=["onClick"],$e=y({__name:"Index",setup(p){const m=c([]),o=c(!1),l=c(!1),e=c(!1),t=c(null),{t:a}=C(),h=()=>{o.value=!0},n=()=>{l.value=!0},f=u=>{t.value=u,e.value=!0},i=()=>{I().then(u=>{m.value=u.data.data})},g=u=>{t.value=u,n()},b=()=>{!t.value||!t.value.id||V(t.value.id).then(()=>{$({title:a("toasts.success"),message:a("resources.toasts.deleted"),type:"success"}),i()}).catch(()=>{$({title:a("toasts.error"),message:a("resources.toasts.errorDeleted"),type:"error"})})};return A(()=>{i()}),(u,v)=>{var k;const F=q("router-link"),x=q("fa-icon");return _(),M(D,null,[s("div",oe,[s("h1",ae,w(u.$t("resources.titles.resourcesList")),1),s("div",le,[d(F,{class:"button default",to:{name:"dashboard"}},{default:R(()=>[G(w(u.$t("buttons.back")),1)]),_:1}),s("button",{type:"button",class:"button primary",onClick:h},w(u.$t("resources.buttons.create")),1)]),s("ul",ne,[(_(!0),M(D,null,P(m.value,r=>(_(),M("li",re,[s("div",ue,[d(J,{url:r.url},null,8,["url"]),s("div",ie,[s("span",de,w(r.name),1),s("div",ce,[s("button",{onClick:S=>g(r)},[d(x,{icon:"edit"})],8,pe),s("button",{onClick:S=>f(r)},[d(x,{icon:"trash"})],8,me)])])])]))),256))])]),d(te,{showModal:o.value,"onUpdate:showModal":v[0]||(v[0]=r=>o.value=r),onCreated:i},null,8,["showModal"]),d(se,{showModal:l.value,"onUpdate:showModal":v[1]||(v[1]=r=>l.value=r),selectedResource:t.value,"onUpdate:selectedResource":v[2]||(v[2]=r=>t.value=r),onUpdated:i},null,8,["showModal","selectedResource"]),d(H,{showDialog:e.value,"onUpdate:showDialog":v[3]||(v[3]=r=>e.value=r),title:u.$t("resources.dialogs.delete.title"),message:u.$t("resources.dialogs.delete.message",{name:((k=t.value)==null?void 0:k.name)||""}),onConfirm:b},null,8,["showDialog","title","message"])],64)}}});export{$e as default};
