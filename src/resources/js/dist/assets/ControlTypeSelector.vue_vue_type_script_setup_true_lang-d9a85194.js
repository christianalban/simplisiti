import{_ as D}from"./Modal.vue_vue_type_script_setup_true_lang-2f7cdc5a.js";import{u as x}from"./ResourceService-dbae8662.js";import{R as E}from"./ResourcePreview-027fdf06.js";import{d as j,o,c as a,g as t,t as $,b as N,e as F,r as L,a as h,w as O,i as z,F as g,h as U,p as R,_ as A,f as G,k as C,z as H,A as J,j as T}from"./index-cc6630f0.js";import{v as K}from"./helpers-6321440c.js";const Q=["value"],W={value:"text"},X={value:"textarea"},Y={value:"resource"},Z={value:"datatable"},ee=j({__name:"VariableTypeSelector",props:{modelValue:{type:String,required:!0}},emits:["update:modelValue"],setup(l){const k=n=>n.target.value;return(n,u)=>(o(),a("select",{class:"input",value:l.modelValue,onChange:u[0]||(u[0]=V=>n.$emit("update:modelValue",k(V)))},[t("option",W,$(n.$t("components.types.text")),1),t("option",X,$(n.$t("components.types.textarea")),1),t("option",Y,$(n.$t("components.types.resource")),1),t("option",Z,$(n.$t("components.types.datatable")),1)],40,Q))}}),te={class:"picker-button-preview"},oe={class:"picker-button-placeholder"},le={class:"grid grid-cols-3 gap-2"},ae=["onClick"],ne=j({__name:"ResourcePicker",props:{modelValue:{type:[Number,String,Object,void 0],required:!0}},emits:["update:modelValue"],setup(l,{emit:k}){const n=l,u=N(!1),{resources:V,loadResources:c,resourceFromId:s}=x(),d=F(()=>{if(n.modelValue!==void 0)return s(+n.modelValue)}),m=k,i=()=>{u.value=!0},f=b=>{m("update:modelValue",b),u.value=!1},q=()=>{c()};return(b,S)=>{var M;const I=L("fa-icon");return o(),a(g,null,[t("button",{onClick:i,type:"button",class:"button secondary picker-button-container"},[t("div",te,[h(E,{url:(M=d.value)==null?void 0:M.url},null,8,["url"])]),t("span",oe,$(d.value?b.$t("components.buttons.changeResource"):b.$t("components.buttons.selectResource")),1)]),h(D,{title:b.$t("components.titles.selectResource"),showModal:u.value,"onUpdate:showModal":S[0]||(S[0]=w=>u.value=w),showCancel:!1,confirmLabel:b.$t("buttons.close")},{default:O(()=>[t("div",null,[t("button",{type:"button",onClick:q,class:"button secondary picker-refresh-button"},[h(I,{icon:"arrow-rotate-right"}),z(" "+$(b.$t("components.buttons.refresh")),1)])]),t("div",le,[(o(!0),a(g,null,U(R(V),w=>(o(),a("button",{type:"button",onClick:e=>f(w.id),class:"button primary flex flex-col gap-2 justify-center items-center"},[h(E,{url:w.url},null,8,["url"]),t("span",null,$(w.name),1)],8,ae))),256))])]),_:1},8,["title","showModal","confirmLabel"])],64)}}});const ue=A(ne,[["__scopeId","data-v-a50596a0"]]),se={class:"w-52 flex"},re={class:"w-full form-group"},ce=["value","onInput","placeholder"],de=["onClick"],me=t("th",null," Â  ",-1),ie={class:"w-52 flex"},pe=["onClick"],fe=j({__name:"DataTable",props:{modelValue:{type:[Object,String,Number,void 0],required:!0},name:{type:String,required:!1}},emits:["update:modelValue"],setup(l,{emit:k}){const n=l,u=({type:e,name:r}={type:"text",name:""})=>({name:r,type:e,value:"",default:""}),V=(e="text")=>({name:"",type:e}),c=N([V()]),s=N([[u()]]),d=N(!1),m=k,i=()=>{d.value=!0},f=()=>{m("update:modelValue",{columns:c.value,rows:s.value}),d.value=!1},q=(e,r,y)=>{r.type=y,s.value.forEach(p=>{p[e].type=r.type})},b=(e,r,y)=>{r.name=K(y),s.value.forEach(p=>{p[e].name=r.name})},S=()=>{c.value.push(V()),s.value.forEach(e=>{e.push(u())})},I=()=>{const e=[];c.value.forEach(({type:r,name:y})=>{e.push(u({type:r,name:y}))}),s.value.push(e)},M=e=>{c.value.splice(e,1),s.value.forEach(r=>{r.splice(e,1)})},w=e=>{s.value.splice(e,1)};return G(()=>{n.modelValue&&typeof n.modelValue=="object"&&(c.value=n.modelValue.columns,s.value=n.modelValue.rows)}),(e,r)=>{const y=L("fa-icon");return o(),a(g,null,[t("button",{onClick:i,type:"button",class:"button secondary flex gap-2 w-full"},[t("span",null,$(e.$t("components.buttons.fillData")),1)]),h(D,{title:e.$t("components.titles.fillData"),showModal:d.value,"onUpdate:showModal":r[0]||(r[0]=p=>d.value=p),showCancel:!1,confirmLabel:e.$t("buttons.close"),resetOnClose:!1,onConfirm:f},{default:O(()=>[t("table",null,[t("thead",null,[t("tr",null,[(o(!0),a(g,null,U(c.value,(p,_)=>(o(),a("th",null,[t("div",se,[t("div",re,[t("input",{class:"input",type:"text",value:p.name,onInput:v=>b(_,p,v.target),placeholder:e.$t("components.placeholders.dataName")},null,40,ce),h(ee,{class:"w-5",modelValue:p.type,"onUpdate:modelValue":v=>q(_,p,v)},null,8,["modelValue","onUpdate:modelValue"]),c.value.length>1?(o(),a("button",{key:0,type:"button",class:"button danger",onClick:v=>M(_)},[h(y,{icon:"minus"})],8,de)):C("",!0),_==c.value.length-1?(o(),a("button",{key:1,type:"button",class:"button primary",onClick:S},[h(y,{icon:"plus"})])):C("",!0)])])]))),256)),me])]),t("tbody",null,[(o(!0),a(g,null,U(s.value,(p,_)=>(o(),a("tr",{key:`${_}:${l.name}`},[(o(!0),a(g,null,U(p,(v,B)=>(o(),a("td",{key:`${l.name}:${c.value[B].name}:${v.name}`},[t("div",ie,[h(ye,{modelValue:v.default,"onUpdate:modelValue":P=>v.default=P,name:v.name,type:v.type},null,8,["modelValue","onUpdate:modelValue","name","type"])])]))),128)),t("td",null,[s.value.length>1?(o(),a("button",{key:0,type:"button",class:"button danger",onClick:v=>w(_)},[h(y,{icon:"minus"})],8,pe)):C("",!0),_==s.value.length-1?(o(),a("button",{key:1,type:"button",class:"button secondary",onClick:I},[h(y,{icon:"plus"})])):C("",!0)])]))),128))])])]),_:1},8,["title","showModal","confirmLabel"])],64)}}}),ve=["value","placeholder"],he=["placeholder"],ye=j({__name:"ControlTypeSelector",props:{type:{type:String,required:!0},modelValue:{type:[String,Number,Object,null,void 0],required:!0},name:{type:String,required:!0},defaultValue:{type:[String,Number,Object,null,void 0]}},emits:["update:modelValue"],setup(l,{emit:k}){const n=l,u=k,V=m=>{u("update:modelValue",m.target.value)},c=m=>{u("update:modelValue",m)},s=m=>{u("update:modelValue",m)},{type:d}=H(n);return J(d,()=>{u("update:modelValue","")}),(m,i)=>(o(),a(g,null,[R(d)==="text"?(o(),a("input",{key:0,type:"text",class:"input w-full",value:l.modelValue||l.defaultValue,onInput:i[0]||(i[0]=f=>V(f)),placeholder:m.$t("components.placeholders.defaultValue")},null,40,ve)):C("",!0),R(d)==="textarea"?(o(),a("textarea",{key:1,class:"input w-full",onInput:i[1]||(i[1]=f=>V(f)),placeholder:m.$t("components.placeholders.defaultValue")},$(l.modelValue||l.defaultValue),41,he)):R(d)==="resource"?(o(),T(ue,{key:2,modelValue:l.modelValue||l.defaultValue,"onUpdate:modelValue":i[2]||(i[2]=f=>c(f))},null,8,["modelValue"])):R(d)==="datatable"?(o(),T(fe,{key:3,name:l.name,modelValue:l.modelValue||l.defaultValue,"onUpdate:modelValue":i[3]||(i[3]=f=>s(f))},null,8,["name","modelValue"])):C("",!0)],64))}});export{ee as _,ye as a};
