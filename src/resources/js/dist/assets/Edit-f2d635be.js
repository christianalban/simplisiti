import{d as w,u as C,x as D,q as y,e as m,g as x,r as $,o as k,c as N,h as t,t as l,a as c,w as U,y as S,z as V,v as B,F,s as p,j as M}from"./index-94e22fa3.js";import{C as T}from"./Form-6458a18b.js";import{_ as q}from"./Dialog.vue_vue_type_script_setup_true_lang-9b6c1811.js";import{a as E,d as I,u as R,m as j}from"./ComponentService-f1858edc.js";import"./CodeEditor.vue_vue_type_script_setup_true_lang-3e235156.js";import"./ResourceService-1b1c8a25.js";import"./LocalStorageService-a50134d2.js";import"./Modal.vue_vue_type_script_setup_true_lang-d2248abd.js";import"./ResourcePreview-43c3ece6.js";import"./vuedraggable.umd-21ac606d.js";import"./PageService-0f64e7b0.js";import"./helpers-d1a74e74.js";import"./Form.vue_vue_type_script_setup_true_lang-be560d03.js";const z=["onSubmit"],W={class:"flex flex-col mb-4 w-full"},A={class:"title"},G={class:"flex gap-2 items-end"},H={class:"flex"},J={type:"submit",class:"button primary"},K={class:"ml-auto flex flex-col gap-2 md:w-1/3"},L={class:"label"},O=["placeholder"],me=w({__name:"Edit",setup(P){const{t:s}=C(),v=D(),f=y(),i=m(""),n=m(""),d=m(!1),r=m([]),u=+v.params.component,h=()=>{R({id:u,html:i.value,variables:j(r.value),name:n.value}).then(()=>{p({title:s("toasts.success"),message:s("components.toasts.updated"),type:"success"})}).catch(()=>{p({title:s("toasts.error"),message:s("components.toasts.errorUpdated"),type:"error"})})},b=()=>{d.value=!0},g=()=>{I(u).then(()=>{f.push({name:"components.index"}),p({title:s("toasts.success"),message:s("components.toasts.deleted"),type:"success"})}).catch(()=>{p({title:s("toasts.error"),message:s("components.toasts.errorDeleted"),type:"error"})})};return x(()=>{E(u,{withData:!1}).then(o=>{const e=o.data.data;i.value=e.html,n.value=e.name,r.value=e.variables.length?e.variables:[{type:"text",name:"",default:""}]})}),(o,e)=>{const _=$("router-link");return k(),N(F,null,[t("form",{class:"overflow-hidden h-full flex flex-col",onSubmit:B(h,["prevent"])},[t("div",W,[t("h1",A,l(o.$t("components.titles.editComponent")),1),t("div",G,[t("div",H,[c(_,{class:"button default",to:{name:"components.index"}},{default:U(()=>[M(l(o.$t("buttons.back")),1)]),_:1},8,["to"])]),t("div",null,[t("button",{onClick:b,type:"button",class:"button danger"},l(o.$t("buttons.delete")),1)]),t("div",null,[t("button",J,l(o.$t("buttons.save")),1)]),t("div",K,[t("label",L,l(o.$t("components.labels.componentName")),1),S(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=a=>n.value=a),required:"",class:"input",placeholder:o.$t("components.placeholders.componentName")},null,8,O),[[V,n.value]])])])]),c(T,{code:i.value,"onUpdate:code":e[1]||(e[1]=a=>i.value=a),variables:r.value,"onUpdate:variables":e[2]||(e[2]=a=>r.value=a)},null,8,["code","variables"])],40,z),c(q,{showDialog:d.value,"onUpdate:showDialog":e[3]||(e[3]=a=>d.value=a),title:o.$t("components.dialogs.delete.title"),message:o.$t("components.dialogs.delete.message",{name:n.value}),onConfirm:g},null,8,["showDialog","title","message"])],64)}}});export{me as default};
