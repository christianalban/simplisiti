import{d as x,e as n,u as B,f as D,g as F,r as w,o as a,c as p,h as l,a as m,k as f,w as k,l as I,F as y,s as $,i as L,t as R,n as M,q as U}from"./index-9625683f.js";import{g as j,c as q}from"./ComponentService-a1d87460.js";import{_ as E,C as G}from"./ComponentFloatingPreview-d7f4b96f.js";import{a as S,l as z,b as A,d as H}from"./helpers-0bfa8f57.js";import{_ as J}from"./Header.vue_vue_type_script_setup_true_lang-927ed474.js";import{_ as K}from"./Dialog.vue_vue_type_script_setup_true_lang-ea2c95df.js";import"./Accordion.vue_vue_type_script_setup_true_lang-6ddffa99.js";import"./ComponentPreview.vue_vue_type_script_setup_true_lang-626aaf35.js";import"./ResourceService-7a7482f8.js";const O={class:"flex flex-col gap-4 h-full py-2"},Q={class:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 py-4"},W={class:"flex items-center justify-between gap-2 bg-blue-200 px-2 py-1"},X={class:"flex flex-col"},Y={class:"font-semibold"},Z=["title","onClick","disabled"],me=x({__name:"Index",setup(ee){const v=n([]),o=n(null),{t:i}=B(),c=n(!1),d=n(""),g=n(!1),u=n(!1),T=e=>{u.value=!0,o.value=e},h=()=>{Promise.all([z(),A()]).then(()=>{j().then(s=>{g.value=!0,v.value=s.data.data})})},N=D(()=>S(v.value)),V=()=>{var e;(e=o.value)!=null&&e.id&&(c.value=!0,q(o.value.id).then(()=>{h(),$({title:i("toasts.success"),message:i("components.toasts.cloned"),type:"success"})}).catch(()=>{$({title:i("toasts.error"),message:i("components.toasts.errorCloned"),type:"error"})}).finally(()=>{u.value=!1,o.value=null,c.value=!1}))};return F(()=>{h()}),(e,s)=>{var b;const _=w("fa-icon"),P=w("router-link");return a(),p(y,null,[l("div",O,[m(J,{title:e.$t("components.titles.componentsList"),backName:"dashboard",backTitle:e.$t("buttons.back"),createName:"components.create",createTitle:e.$t("components.buttons.create"),searchTitle:e.$t("placeholders.search"),modelValue:d.value,"onUpdate:modelValue":s[0]||(s[0]=r=>d.value=r)},null,8,["title","backTitle","createTitle","searchTitle","modelValue"]),g.value?(a(),f(E,{key:0,class:"h-full overflow-y-auto",items:N.value,filter:d.value},{default:k(r=>[l("div",Q,[(a(!0),p(y,null,L(r.item,t=>(a(),f(P,{key:t.id,to:{name:"components.edit",params:{component:t.id}},class:"shadow-lg rounded-lg overflow-hidden border-4 hover:border-blue-200"},{default:k(()=>{var C;return[l("div",W,[l("div",X,[l("span",Y,R(M(H)(t.name)),1)]),l("div",null,[c.value&&((C=o.value)==null?void 0:C.id)===t.id?(a(),f(_,{key:0,icon:"spinner",class:"animate-spin"})):(a(),p("button",{key:1,type:"button",title:e.$t("components.titles.clone"),onClick:U(oe=>T(t),["prevent"]),disabled:c.value},[m(_,{icon:"clone"})],8,Z))])]),m(G,{component:t,class:"flex-1 overflow-hidden"},null,8,["component"])]}),_:2},1032,["to"]))),128))])]),_:1},8,["items","filter"])):I("",!0)]),m(K,{showDialog:u.value,"onUpdate:showDialog":s[1]||(s[1]=r=>u.value=r),title:e.$t("components.dialogs.clone.title"),message:e.$t("components.dialogs.clone.message",{name:(b=o.value)==null?void 0:b.name}),onConfirm:V},null,8,["showDialog","title","message"])],64)}}});export{me as default};
