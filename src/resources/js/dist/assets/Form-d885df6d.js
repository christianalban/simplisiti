import{_ as k}from"./CodeEditor.vue_vue_type_script_setup_true_lang-66418b66.js";import{a as F,v as S}from"./helpers-66e66eca.js";import{u as B}from"./ResourceService-0cd8cc5f.js";import{_ as I,a as M,u as q,b as A}from"./ControlTypeSelector.vue_vue_type_script_setup_true_lang-e56c0370.js";import{b as D,d as C,x as O,e as w,f as j,r as R,o as g,c as y,a as u,h as o,y as x,g as H,t as b,n as z,F as V,i as E,j as L,w as Q,_ as T}from"./index-7085bc63.js";import{_ as W}from"./Modal.vue_vue_type_script_setup_true_lang-a4bf00f9.js";import{_ as G}from"./Form.vue_vue_type_script_setup_true_lang-63d93336.js";const U=e=>e?["datasource",null].includes(e):!1,J=async(e,r)=>{const d=F(`component/${e}/variable/${r.name}/${r.type}/settings`,{withSettings:!0},{default:r.default});return await D.get(d)},K={class:"form-group h-14"},P=["value","placeholder"],X={class:"flex flex-col text-xs w-14"},Y=["disabled"],Z=["disabled"],ee=C({__name:"VariableConfigItem",props:{type:{type:String,required:!0},name:{type:String,required:!0},default:{type:[String,Number,Object,null,void 0],required:!0},showRemove:{type:Boolean,default:!0}},emits:["update:type","update:name","update:default","removeVariable","displaySettings"],setup(e,{emit:r}){const d=e,h=O(),c=w(d.name),p=r,m=j(()=>U(d.type)),f=()=>{p("removeVariable")},v=()=>{J(h.params.component,{type:d.type,name:d.name,default:d.default}).then(n=>{p("displaySettings",n.data.data)})},_=n=>c.value=S(n.target);return(n,l)=>{const a=R("fa-icon");return g(),y("div",K,[u(I,{class:"w-20",modelValue:e.type,"onUpdate:modelValue":l[0]||(l[0]=t=>n.$emit("update:type",t))},null,8,["modelValue"]),o("input",{type:"text",class:"input w-32",value:c.value,onInput:l[1]||(l[1]=t=>_(t)),onBlur:l[2]||(l[2]=t=>n.$emit("update:name",c.value)),placeholder:n.$t("components.placeholders.name")},null,40,P),u(M,{class:"flex-1",modelValue:e.default,"onUpdate:modelValue":l[3]||(l[3]=t=>n.$emit("update:default",t)),name:e.name,type:e.type},null,8,["modelValue","name","type"]),o("div",X,[o("button",{type:"button",class:x(["variable-button flex-1 rounded-tr",{"bg-blue-200 text-blue-900":m.value,"bg-blue-100 text-blue-300 cursor-not-allowed":!m.value}]),onClick:v,disabled:!m.value},[u(a,{icon:"gear"})],10,Y),o("button",{type:"button",class:x(["variable-button flex-1 bg-red-200 text-red-900 rounded-br ",{"hover:bg-red-300 cursor-pointer":e.showRemove,"cursor-not-allowed":!e.showRemove}]),onClick:f,disabled:!e.showRemove},[u(a,{icon:"minus"})],10,Z)])])}}}),te={class:"flex flex-col gap-4"},ae={class:"flex flex-col gap-2 w-1/3"},oe={class:"label"},se=["value","placeholder"],ne={class:"flex gap-4 h-screen py-2"},le={class:"w-8/12"},de={class:"title mb-4"},ue={class:"w-4/12"},ie={class:"title mb-4"},re={class:"flex flex-col gap-2 bg-gray-100 p-2 rounded-lg"},me={class:"w-full"},pe=C({__name:"Form",props:{code:{type:String,default:"<div>Hello World</div>"},variables:{type:Array,default:()=>[{type:"text",name:"",default:""}]},name:{type:String,default:""}},emits:["update:code","update:variables","update:name"],setup(e,{emit:r}){const{loadResources:d}=B(),{loadSources:h}=q(),{loadActions:c}=A(),p=e,m=w(!1),f=w([]),v=r,_=()=>{v("update:variables",[...p.variables,{type:"text",name:"",default:""}])},n=a=>{v("update:variables",p.variables.filter((t,$)=>$!==a))},l=(a,t)=>{U(a.type)&&(f.value=t||[],a.settings=t,m.value=!0)};return H(()=>{d(),h(),c()}),(a,t)=>{const $=R("fa-icon");return g(),y(V,null,[o("div",te,[o("div",ae,[o("label",oe,b(a.$t("components.labels.componentName")),1),o("input",{type:"text",value:e.name,required:"",onInput:t[0]||(t[0]=s=>a.$emit("update:name",z(S)(s.target))),class:"input",placeholder:a.$t("components.placeholders.componentName")},null,40,se)]),o("div",ne,[o("div",le,[o("h2",de,b(a.$t("components.titles.code")),1),u(k,{code:p.code,"onUpdate:code":t[1]||(t[1]=s=>a.$emit("update:code",s)),language:"html"},null,8,["code"])]),o("div",ue,[o("h2",ie,b(a.$t("components.titles.variables")),1),o("div",re,[(g(!0),y(V,null,E(e.variables,(s,N)=>(g(),y("div",{key:s.name},[u(ee,{type:s.type,"onUpdate:type":i=>s.type=i,name:s.name,"onUpdate:name":i=>s.name=i,default:s.default,"onUpdate:default":i=>s.default=i,showRemove:e.variables.length>1,onRemoveVariable:i=>n(N),onDisplaySettings:i=>l(s,i)},null,8,["type","onUpdate:type","name","onUpdate:name","default","onUpdate:default","showRemove","onRemoveVariable","onDisplaySettings"])]))),128)),o("div",me,[o("button",{type:"button",class:"variable-button bg-teal-200 hover:bg-teal-300 text-teal-900 w-full rounded",onClick:_},[u($,{icon:"plus"}),L(" "+b(a.$t("components.buttons.addVariable")),1)])])])])])]),u(W,{title:a.$t("titles.settings"),showModal:m.value,"onUpdate:showModal":t[2]||(t[2]=s=>m.value=s),resetOnClose:!1},{default:Q(()=>[u(G,{settingMenu:f.value},null,8,["settingMenu"])]),_:1},8,["title","showModal"])],64)}}});const _e=T(pe,[["__scopeId","data-v-7bfce5b3"]]);export{_e as C};
