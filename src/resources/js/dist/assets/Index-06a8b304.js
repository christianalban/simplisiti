import{c as N,a as E,g as I,d as V}from"./ResourceService-e8fff348.js";import{v as L}from"./helpers-6321440c.js";import{d as M,g as h,b as $,e as s,t as w,p as O,u as C,r as m,j as U,w as R,s as b,h as p,v as T,x as z,o as P,a as q,F as D,f as A,i as G}from"./index-142e603b.js";import{_ as j}from"./Modal.vue_vue_type_script_setup_true_lang-9066419f.js";import{_ as H}from"./Dialog.vue_vue_type_script_setup_true_lang-da30dc31.js";const J={class:"flex flex-col gap-4"},K={class:"flex flex-col gap-2 w-full"},Q={class:"label"},W=["value","placeholder"],X={class:"flex flex-col gap-2 w-full"},Y={class:"label"},Z=["required","placeholder"],B=M({__name:"Form",props:{name:{type:String,required:!0},file:{type:[Object,null],default:null},fileRequired:{type:Boolean,default:!1}},emits:["update:name","update:file"],setup(n,{emit:d}){const o=d,a=e=>{var t;e&&o("update:file",((t=e.files)==null?void 0:t[0])??null)};return(e,t)=>(h(),$("div",J,[s("div",K,[s("label",Q,w(e.$t("resources.labels.resourceName")),1),s("input",{type:"text",value:n.name,required:"",onInput:t[0]||(t[0]=l=>e.$emit("update:name",O(L)(l.target))),class:"input",placeholder:e.$t("resources.placeholders.resourceName")},null,40,W)]),s("div",X,[s("label",Y,w(e.$t("resources.labels.resourceFile")),1),s("input",{type:"file",required:n.fileRequired,onChange:t[1]||(t[1]=l=>a(l.target)),class:"input",placeholder:e.$t("resources.placeholders.resourceFile"),accept:"image/jpeg,image/svg+xml,image/png,image/webp,video/mp4,application/pdf,image/gif,application/vnd.rar,application/x-7z-compressed,font/woff,font/woff2,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,font/ttf,image/vnd.microsoft.icon"},null,40,Z)])]))}}),ee=M({__name:"Create",props:{showModal:{type:Boolean,required:!0}},emits:["created","update:showModal"],setup(n,{emit:d}){const{t:o}=C(),a=m(""),e=m(void 0),t=d,l=()=>{N({name:a.value,file:e.value}).then(()=>{b({title:o("toasts.success"),message:o("resources.toasts.created"),type:"success"}),t("created"),a.value=""}).catch(()=>{b({title:o("toasts.error"),message:o("resources.toasts.errorCreated"),type:"error"})})};return(g,r)=>(h(),U(j,{title:g.$t("resources.titles.createResource"),showModal:n.showModal,onClose:r[2]||(r[2]=f=>g.$emit("update:showModal",!1)),onConfirm:l},{default:R(()=>[p(B,{name:a.value,"onUpdate:name":r[0]||(r[0]=f=>a.value=f),file:e.value,"onUpdate:file":r[1]||(r[1]=f=>e.value=f),fileRequired:!0},null,8,["name","file"])]),_:1},8,["title","showModal"]))}}),te=M({__name:"Edit",props:{selectedResource:{type:Object,required:!0},showModal:{type:Boolean,required:!0}},emits:["updated","update:selectedResource","update:showModal"],setup(n,{emit:d}){const{t:o}=C(),a=n,e=m(""),t=m(void 0),l=d,g=()=>{r.value&&E({id:r.value.id,name:e.value,file:t.value}).then(()=>{b({title:o("toasts.success"),message:o("resources.toasts.created"),type:"success"}),l("updated"),e.value=""}).catch(()=>{b({title:o("toasts.error"),message:o("resources.toasts.errorCreated"),type:"error"})})},{selectedResource:r}=T(a),f=()=>{l("update:selectedResource",null),l("update:showModal",!1)};return z(r,c=>{e.value=(c==null?void 0:c.name)||""}),(c,_)=>(h(),U(j,{title:c.$t("resources.titles.updateResource"),showModal:n.showModal,onClose:f,onConfirm:g},{default:R(()=>[p(B,{name:e.value,"onUpdate:name":_[0]||(_[0]=y=>e.value=y),file:t.value,"onUpdate:file":_[1]||(_[1]=y=>t.value=y)},null,8,["name","file"])]),_:1},8,["title","showModal"]))}}),se=["src"],oe=["src"],ae=M({__name:"ResourcePreview",props:{url:{type:String,default:""}},setup(n){return(d,o)=>{var a;return(a=n.url)!=null&&a.match(".mp4")?(h(),$("video",{key:0,src:n.url,class:"h-32 object-cover",controls:""},null,8,se)):(h(),$("img",{key:1,src:n.url,class:"h-32 object-cover"},null,8,oe))}}}),le={class:"flex flex-col gap-4 h-screen py-2"},ne={class:"title"},re={class:"flex gap-2"},ue={class:"grid grid-cols-5 gap-4"},ie={class:"flex"},ce={type:"button",class:"button primary w-full flex flex-col items-center justify-between"},de={class:"flex w-full justify-between mt-4"},pe={class:"font-semibold"},me={class:"flex gap-2"},fe=["onClick"],ve=["onClick"],be=M({__name:"Index",setup(n){const d=m([]),o=m(!1),a=m(!1),e=m(!1),t=m(null),{t:l}=C(),g=()=>{o.value=!0},r=()=>{a.value=!0},f=i=>{t.value=i,e.value=!0},c=()=>{I().then(i=>{d.value=i.data.data})},_=i=>{t.value=i,r()},y=()=>{!t.value||!t.value.id||V(t.value.id).then(()=>{b({title:l("toasts.success"),message:l("resources.toasts.deleted"),type:"success"}),c()}).catch(()=>{b({title:l("toasts.error"),message:l("resources.toasts.errorDeleted"),type:"error"})})};return P(()=>{c()}),(i,v)=>{var k;const S=q("router-link"),x=q("fa-icon");return h(),$(D,null,[s("div",le,[s("h1",ne,w(i.$t("resources.titles.resourcesList")),1),s("div",re,[p(S,{class:"button default",to:{name:"dashboard"}},{default:R(()=>[G(w(i.$t("buttons.back")),1)]),_:1}),s("button",{type:"button",class:"button primary",onClick:g},w(i.$t("resources.buttons.create")),1)]),s("ul",ue,[(h(!0),$(D,null,A(d.value,u=>(h(),$("li",ie,[s("div",ce,[p(ae,{url:u.url},null,8,["url"]),s("div",de,[s("span",pe,w(u.name),1),s("div",me,[s("button",{onClick:F=>_(u)},[p(x,{icon:"edit"})],8,fe),s("button",{onClick:F=>f(u)},[p(x,{icon:"trash"})],8,ve)])])])]))),256))])]),p(ee,{showModal:o.value,"onUpdate:showModal":v[0]||(v[0]=u=>o.value=u),onCreated:c},null,8,["showModal"]),p(te,{showModal:a.value,"onUpdate:showModal":v[1]||(v[1]=u=>a.value=u),selectedResource:t.value,"onUpdate:selectedResource":v[2]||(v[2]=u=>t.value=u),onUpdated:c},null,8,["showModal","selectedResource"]),p(H,{showDialog:e.value,"onUpdate:showDialog":v[3]||(v[3]=u=>e.value=u),title:i.$t("resources.dialogs.delete.title"),message:i.$t("resources.dialogs.delete.message",{name:((k=t.value)==null?void 0:k.name)||""}),onConfirm:y},null,8,["showDialog","title","message"])],64)}}});export{be as default};
