import{d as C,u as D,x as _,q as y,e as m,g as x,r as $,o as k,c as U,h as a,t as i,a as c,w as S,v as B,F,s as u,j as N}from"./index-fa07b5a0.js";import{C as V}from"./Form-a0696f57.js";import{_ as E}from"./Dialog.vue_vue_type_script_setup_true_lang-4228c373.js";import{a as I,d as M,u as R,m as T}from"./ComponentService-6efc63db.js";import"./CodeEditor.vue_vue_type_script_setup_true_lang-a84112c2.js";import"./helpers-73a2380c.js";import"./ResourceService-63ff442d.js";import"./ControlTypeSelector.vue_vue_type_script_setup_true_lang-63125c67.js";import"./Modal.vue_vue_type_script_setup_true_lang-cda63354.js";import"./ResourcePreview-4992d2f9.js";import"./Form.vue_vue_type_script_setup_true_lang-b0bc53c0.js";const j=["onSubmit"],q={class:"flex flex-col gap-4 mb-4 w-full"},W={class:"title"},z={class:"flex gap-2"},A={type:"submit",class:"button primary"},te=C({__name:"Edit",setup(G){const{t}=D(),v=_(),f=y(),l=m(""),n=m(""),p=m(!1),r=m([]),d=+v.params.component,g=()=>{R({id:d,html:l.value,variables:T(r.value),name:n.value}).then(()=>{u({title:t("toasts.success"),message:t("components.toasts.updated"),type:"success"})}).catch(()=>{u({title:t("toasts.error"),message:t("components.toasts.errorUpdated"),type:"error"})})},b=()=>{p.value=!0},h=()=>{M(d).then(()=>{f.push({name:"components.index"}),u({title:t("toasts.success"),message:t("components.toasts.deleted"),type:"success"})}).catch(()=>{u({title:t("toasts.error"),message:t("components.toasts.errorDeleted"),type:"error"})})};return x(()=>{I(d,{withData:!1}).then(o=>{const e=o.data.data;l.value=e.html,n.value=e.name,r.value=e.variables.length?e.variables:[{type:"text",name:"",default:""}]})}),(o,e)=>{const w=$("router-link");return k(),U(F,null,[a("form",{class:"overflow-hidden h-full flex flex-col",onSubmit:B(g,["prevent"])},[a("div",q,[a("h1",W,i(o.$t("components.titles.editComponent")),1),a("div",z,[c(w,{class:"button default",to:{name:"components.index"}},{default:S(()=>[N(i(o.$t("buttons.back")),1)]),_:1},8,["to"]),a("button",{onClick:b,type:"button",class:"button danger"},i(o.$t("buttons.delete")),1),a("button",A,i(o.$t("buttons.save")),1)])]),c(V,{code:l.value,"onUpdate:code":e[0]||(e[0]=s=>l.value=s),name:n.value,"onUpdate:name":e[1]||(e[1]=s=>n.value=s),variables:r.value,"onUpdate:variables":e[2]||(e[2]=s=>r.value=s)},null,8,["code","name","variables"])],40,j),c(E,{showDialog:p.value,"onUpdate:showDialog":e[3]||(e[3]=s=>p.value=s),title:o.$t("components.dialogs.delete.title"),message:o.$t("components.dialogs.delete.message",{name:n.value}),onConfirm:h},null,8,["showDialog","title","message"])],64)}}});export{te as default};
