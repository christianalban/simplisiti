import{d as P,u as h,n as U,l as T,b as l,f as b,c as y,g as R,a as g,m as $,F as B,s as i,o as C}from"./index-cc6630f0.js";import{P as F,a as k}from"./Form-321f089a.js";import{_ as E}from"./Dialog.vue_vue_type_script_setup_true_lang-43a1ea65.js";import{a as I,d as M,u as N}from"./PageService-bebb8166.js";import{u as S}from"./ResourceService-dbae8662.js";import"./helpers-6321440c.js";import"./vuedraggable.umd-7961fdc7.js";import"./ComponentService-2e36635b.js";import"./ControlTypeSelector.vue_vue_type_script_setup_true_lang-d9a85194.js";import"./Modal.vue_vue_type_script_setup_true_lang-2f7cdc5a.js";import"./ResourcePreview-027fdf06.js";const V=["onSubmit"],W=P({__name:"Edit",setup(j){const{t:s}=h(),d=U(),c=T(),a=l(""),n=l(""),r=l(""),p=l(!1),u=l([]),m=+d.params.page,{loadResources:v}=S(),f=()=>{N({id:m,name:a.value,url:n.value,title:r.value,sections:u.value}).then(()=>{i({title:s("toasts.success"),message:s("pages.toasts.updated"),type:"success"})}).catch(()=>{i({title:s("toasts.error"),message:s("pages.toasts.errorUpdated"),type:"error"})})},D=()=>{p.value=!0},w=()=>{M(m).then(()=>{c.push({name:"pages.index"}),i({title:s("toasts.success"),message:s("pages.toasts.deleted"),type:"success"})}).catch(()=>{i({title:s("toasts.error"),message:s("pages.toasts.errorDeleted"),type:"error"})})};return b(()=>{I(m).then(o=>{const e=o.data.data;a.value=e.name,n.value=e.url,r.value=e.title,u.value=e.sections}),v()}),(o,e)=>(C(),y(B,null,[R("form",{onSubmit:$(f,["prevent"])},[g(F,{title:o.$t("pages.titles.editPage"),showDelete:!0,onDelete:D,name:a.value,"onUpdate:name":e[0]||(e[0]=t=>a.value=t),url:n.value,"onUpdate:url":e[1]||(e[1]=t=>n.value=t),pageTitle:r.value,"onUpdate:pageTitle":e[2]||(e[2]=t=>r.value=t)},null,8,["title","name","url","pageTitle"]),g(k,{sections:u.value,"onUpdate:sections":e[3]||(e[3]=t=>u.value=t)},null,8,["sections"])],40,V),g(E,{showDialog:p.value,"onUpdate:showDialog":e[4]||(e[4]=t=>p.value=t),title:o.$t("pages.dialogs.delete.title"),message:o.$t("pages.dialogs.delete.message",{name:a.value}),onConfirm:w},null,8,["showDialog","title","message"])],64))}});export{W as default};
