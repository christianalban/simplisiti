import{_ as D}from"./Modal.vue_vue_type_script_setup_true_lang-05d6641e.js";import{u as x}from"./ResourceService-eb2a19c9.js";import{R as E}from"./ResourcePreview-94c69348.js";import{d as q,o,c as l,g as t,t as _,b as N,e as F,r as L,a as h,w as B,i as z,F as g,h as U,p as R,_ as A,f as G,k as C,z as H,A as J,j as T}from"./index-3f981e9e.js";import{v as K}from"./helpers-6321440c.js";const Q=["value"],W={value:"text"},X={value:"textarea"},Y={value:"resource"},Z={value:"datatable"},ee=q({__name:"VariableTypeSelector",props:{modelValue:{type:String,required:!0}},emits:["update:modelValue"],setup(s){const k=n=>n.target.value;return(n,a)=>(o(),l("select",{class:"input",value:s.modelValue,onChange:a[0]||(a[0]=V=>n.$emit("update:modelValue",k(V)))},[t("option",W,_(n.$t("components.types.text")),1),t("option",X,_(n.$t("components.types.textarea")),1),t("option",Y,_(n.$t("components.types.resource")),1),t("option",Z,_(n.$t("components.types.datatable")),1)],40,Q))}}),te={class:"picker-button-preview"},oe={class:"picker-button-placeholder"},le={class:"grid grid-cols-3 gap-2"},ne=["onClick"],ae=q({__name:"ResourcePicker",props:{modelValue:{type:[Number,String,Object,void 0],required:!0}},emits:["update:modelValue"],setup(s,{emit:k}){const n=s,a=N(!1),{resources:V,loadResources:c,resourceFromId:u}=x(),d=F(()=>{if(n.modelValue!==void 0)return u(+n.modelValue)}),m=k,p=()=>{a.value=!0},f=b=>{m("update:modelValue",b),a.value=!1},I=()=>{c()};return(b,S)=>{var M;const j=L("fa-icon");return o(),l(g,null,[t("button",{onClick:p,type:"button",class:"button secondary picker-button-container"},[t("div",te,[h(E,{url:(M=d.value)==null?void 0:M.url},null,8,["url"])]),t("span",oe,_(d.value?b.$t("components.buttons.changeResource"):b.$t("components.buttons.selectResource")),1)]),h(D,{title:b.$t("components.titles.selectResource"),showModal:a.value,"onUpdate:showModal":S[0]||(S[0]=w=>a.value=w),showCancel:!1,confirmLabel:b.$t("buttons.close")},{default:B(()=>[t("div",null,[t("button",{type:"button",onClick:I,class:"button secondary picker-refresh-button"},[h(j,{icon:"arrow-rotate-right"}),z(" "+_(b.$t("components.buttons.refresh")),1)])]),t("div",le,[(o(!0),l(g,null,U(R(V),w=>(o(),l("button",{type:"button",onClick:e=>f(w.id),class:"button primary flex flex-col gap-2 justify-center items-center"},[h(E,{url:w.url},null,8,["url"]),t("span",null,_(w.name),1)],8,ne))),256))])]),_:1},8,["title","showModal","confirmLabel"])],64)}}});const ue=A(ae,[["__scopeId","data-v-a50596a0"]]),se={class:"w-52 flex"},re={class:"w-full form-group"},ce=["value","onInput","placeholder"],de=["onClick"],me=t("th",null," Â  ",-1),pe={class:"w-52 flex"},ie=["onClick"],fe=q({__name:"DataTable",props:{modelValue:{type:[Object,String,Number,void 0],required:!0},name:{type:String,required:!1}},emits:["update:modelValue"],setup(s,{emit:k}){const n=s,a=({type:e,name:r}={type:"text",name:""})=>({name:r,type:e,value:"",default:""}),V=(e="text")=>({name:"",type:e}),c=N([V()]),u=N([[a()]]),d=N(!1),m=k,p=()=>{d.value=!0},f=()=>{m("update:modelValue",{columns:c.value,rows:u.value}),d.value=!1},I=(e,r,y)=>{r.type=y,u.value.forEach(i=>{i[e].type=r.type})},b=(e,r,y)=>{r.name=K(y),u.value.forEach(i=>{i[e].name=r.name})},S=()=>{c.value.push(V()),u.value.forEach(e=>{e.push(a())})},j=()=>{const e=[];c.value.forEach(({type:r,name:y})=>{e.push(a({type:r,name:y}))}),u.value.push(e)},M=e=>{c.value.splice(e,1),u.value.forEach(r=>{r.splice(e,1)})},w=e=>{u.value.splice(e,1)};return G(()=>{n.modelValue&&typeof n.modelValue=="object"&&(c.value=n.modelValue.columns,u.value=n.modelValue.rows)}),(e,r)=>{const y=L("fa-icon");return o(),l(g,null,[t("button",{onClick:p,type:"button",class:"button secondary flex gap-2 w-full"},[t("span",null,_(e.$t("components.buttons.fillData")),1)]),h(D,{title:e.$t("components.titles.fillData"),showModal:d.value,"onUpdate:showModal":r[0]||(r[0]=i=>d.value=i),showCancel:!1,confirmLabel:e.$t("buttons.close"),resetOnClose:!1,onConfirm:f},{default:B(()=>[t("table",null,[t("thead",null,[t("tr",null,[(o(!0),l(g,null,U(c.value,(i,$)=>(o(),l("th",null,[t("div",se,[t("div",re,[t("input",{class:"input",type:"text",value:i.name,onInput:v=>b($,i,v.target),placeholder:e.$t("components.placeholders.dataName")},null,40,ce),h(ee,{class:"w-5",modelValue:i.type,"onUpdate:modelValue":v=>I($,i,v)},null,8,["modelValue","onUpdate:modelValue"]),c.value.length>1?(o(),l("button",{key:0,type:"button",class:"button danger",onClick:v=>M($)},[h(y,{icon:"minus"})],8,de)):C("",!0),$==c.value.length-1?(o(),l("button",{key:1,type:"button",class:"button primary",onClick:S},[h(y,{icon:"plus"})])):C("",!0)])])]))),256)),me])]),t("tbody",null,[(o(!0),l(g,null,U(u.value,(i,$)=>(o(),l("tr",{key:`${$}:${s.name}`},[(o(!0),l(g,null,U(i,(v,O)=>(o(),l("td",{key:`${s.name}:${c.value[O].name}:${v.name}`},[t("div",pe,[h(ye,{modelValue:v.default,"onUpdate:modelValue":P=>v.default=P,name:v.name,type:v.type},null,8,["modelValue","onUpdate:modelValue","name","type"])])]))),128)),t("td",null,[u.value.length>1?(o(),l("button",{key:0,type:"button",class:"button danger",onClick:v=>w($)},[h(y,{icon:"minus"})],8,ie)):C("",!0),$==u.value.length-1?(o(),l("button",{key:1,type:"button",class:"button secondary",onClick:j},[h(y,{icon:"plus"})])):C("",!0)])]))),128))])])]),_:1},8,["title","showModal","confirmLabel"])],64)}}}),ve=["value","placeholder"],he=["placeholder"],ye=q({__name:"ControlTypeSelector",props:{type:{type:String,required:!0},modelValue:{type:[String,Number,Object,null,void 0],required:!0},name:{type:String,required:!0}},emits:["update:modelValue"],setup(s,{emit:k}){const n=s,a=k,V=m=>{a("update:modelValue",m.target.value)},c=m=>{a("update:modelValue",m)},u=m=>{a("update:modelValue",m)},{type:d}=H(n);return J(d,()=>{a("update:modelValue","")}),(m,p)=>(o(),l(g,null,[R(d)==="text"?(o(),l("input",{key:0,type:"text",class:"input w-full",value:s.modelValue,onInput:p[0]||(p[0]=f=>V(f)),placeholder:m.$t("components.placeholders.defaultValue")},null,40,ve)):C("",!0),R(d)==="textarea"?(o(),l("textarea",{key:1,class:"input w-full",onInput:p[1]||(p[1]=f=>V(f)),placeholder:m.$t("components.placeholders.defaultValue")},_(s.modelValue),41,he)):R(d)==="resource"?(o(),T(ue,{key:2,modelValue:s.modelValue,"onUpdate:modelValue":p[2]||(p[2]=f=>c(f))},null,8,["modelValue"])):R(d)==="datatable"?(o(),T(fe,{key:3,name:s.name,modelValue:s.modelValue,"onUpdate:modelValue":p[3]||(p[3]=f=>u(f))},null,8,["name","modelValue"])):C("",!0)],64))}});export{ee as _,ye as a};
