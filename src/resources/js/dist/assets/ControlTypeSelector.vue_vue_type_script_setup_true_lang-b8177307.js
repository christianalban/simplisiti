import{d as U,o as t,c as a,g as l,t as v,b as S,x as A,e as L,r as E,a as w,w as I,D as G,i as H,q as J,C as K,F as C,h as M,f as Q,k as q,l as k,z as W,A as X,j as x}from"./index-de52eb0e.js";import{_ as O}from"./Modal.vue_vue_type_script_setup_true_lang-84c22c2f.js";import{u as Y}from"./ResourceService-23dd2ec3.js";import{R as T}from"./ResourcePreview-15f81498.js";import{v as Z}from"./helpers-ddca868d.js";const ee=["value"],te={value:"text"},le={value:"textarea"},oe={value:"resource"},ae={value:"datatable"},ne={value:"datasource"},ue={value:"action"},se=U({__name:"VariableTypeSelector",props:{modelValue:{type:String,required:!0}},emits:["update:modelValue"],setup(e){const $=n=>n.target.value;return(n,s)=>(t(),a("select",{class:"input",value:e.modelValue,onChange:s[0]||(s[0]=p=>n.$emit("update:modelValue",$(p)))},[l("option",te,v(n.$t("components.types.text")),1),l("option",le,v(n.$t("components.types.textarea")),1),l("option",oe,v(n.$t("components.types.resource")),1),l("option",ae,v(n.$t("components.types.datatable")),1),l("option",ne,v(n.$t("components.types.datasource")),1),l("option",ue,v(n.$t("components.types.action")),1)],40,ee))}}),B=S([]),re=async()=>await A.get("source"),ce=async()=>{const e=await re();B.value=e.data.data},de=()=>({sources:B,loadSources:ce}),F=S([]),ie=async()=>await A.get("action"),me=async()=>{const e=await ie();F.value=e.data.data},pe=()=>({actions:F,loadActions:me}),fe={class:"w-full flex items-center justify-center max-h-full"},ve={class:"absolute top-1/4 bg-teal-500 rounded-lg text-white text-xs p-1 bg-opacity-50"},Ve={class:"flex justify-between mb-4"},he=["placeholder"],ye={class:"grid grid-cols-3 gap-2 overflow-y-auto max-h-[70vh]"},$e=["onClick"],be=U({__name:"ResourcePicker",props:{modelValue:{type:[Number,String,Object,void 0],required:!0}},emits:["update:modelValue"],setup(e,{emit:$}){const n=e,s=S(!1),p=S(""),u=S(!1),{resources:r,loadResources:V,resourceFromId:j}=Y(),b=L(()=>r.value.filter(y=>y.name.toLowerCase().includes(p.value.toLowerCase()))),d=L(()=>{if(n.modelValue!==void 0)return j(+n.modelValue)}),m=$,f=()=>{s.value=!0},N=y=>{m("update:modelValue",y),s.value=!1},D=()=>{u.value=!0,V().finally(()=>{u.value=!1})};return(y,R)=>{var i;const o=E("fa-icon");return t(),a(C,null,[l("button",{onClick:f,type:"button",class:"button secondary flex gap-2 w-full flex-col justify-start !p-1 relative items-center"},[l("div",fe,[w(T,{url:(i=d.value)==null?void 0:i.url},null,8,["url"])]),l("span",ve,v(d.value?y.$t("components.buttons.changeResource"):y.$t("components.buttons.selectResource")),1)]),w(O,{title:y.$t("components.titles.selectResource"),showModal:s.value,"onUpdate:showModal":R[1]||(R[1]=c=>s.value=c),showCancel:!1,confirmLabel:y.$t("buttons.close")},{default:I(()=>[l("div",Ve,[l("button",{type:"button",onClick:D,class:"button secondary"},[w(o,{icon:"sync",class:G({"animate-spin":u.value})},null,8,["class"]),H(" "+v(y.$t("resources.buttons.refresh")),1)]),J(l("input",{type:"search","onUpdate:modelValue":R[0]||(R[0]=c=>p.value=c),class:"input",placeholder:y.$t("placeholders.search")},null,8,he),[[K,p.value]])]),l("div",ye,[(t(!0),a(C,null,M(b.value,c=>(t(),a("button",{type:"button",onClick:h=>N(c.id),class:"button primary flex flex-col gap-2 justify-center items-center"},[w(T,{url:c.url},null,8,["url"]),l("span",null,v(c.name),1)],8,$e))),256))])]),_:1},8,["title","showModal","confirmLabel"])],64)}}}),ge={class:"w-52 flex"},we={class:"w-full form-group"},Ce=["value","onInput","placeholder"],_e=["onClick"],ke=l("th",null," Â  ",-1),Se={class:"w-52 flex"},Re=["onClick"],qe=U({__name:"DataTable",props:{modelValue:{type:[Object,String,Number,void 0],required:!0},name:{type:String,required:!1}},emits:["update:modelValue"],setup(e,{emit:$}){const n=e,s=({type:o,name:i}={type:"text",name:""})=>({name:i,type:o,value:"",default:""}),p=(o="text")=>({name:"",type:o}),u=S([p()]),r=S([[s()]]),V=S(!1),j=$,b=()=>{V.value=!0},d=()=>{j("update:modelValue",{columns:u.value,rows:r.value}),V.value=!1},m=(o,i,c)=>{i.type=c,r.value.forEach(h=>{h[o].type=i.type})},f=(o,i,c)=>{i.name=Z(c),r.value.forEach(h=>{h[o].name=i.name})},N=()=>{u.value.push(p()),r.value.forEach(o=>{o.push(s())})},D=()=>{const o=[];u.value.forEach(({type:i,name:c})=>{o.push(s({type:i,name:c}))}),r.value.push(o)},y=o=>{u.value.splice(o,1),r.value.forEach(i=>{i.splice(o,1)})},R=o=>{r.value.splice(o,1)};return Q(()=>{n.modelValue&&typeof n.modelValue=="object"&&(u.value=n.modelValue.columns,r.value=n.modelValue.rows)}),(o,i)=>{const c=E("fa-icon");return t(),a(C,null,[l("button",{onClick:b,type:"button",class:"button secondary flex gap-2 w-full"},[l("span",null,v(o.$t("components.buttons.fillData")),1)]),w(O,{title:o.$t("components.titles.fillData"),showModal:V.value,"onUpdate:showModal":i[0]||(i[0]=h=>V.value=h),showCancel:!1,confirmLabel:o.$t("buttons.close"),resetOnClose:!1,onConfirm:d},{default:I(()=>[l("table",null,[l("thead",null,[l("tr",null,[(t(!0),a(C,null,M(u.value,(h,_)=>(t(),a("th",null,[l("div",ge,[l("div",we,[l("input",{class:"input",type:"text",value:h.name,onInput:g=>f(_,h,g.target),placeholder:o.$t("components.placeholders.dataName")},null,40,Ce),w(se,{class:"w-5",modelValue:h.type,"onUpdate:modelValue":g=>m(_,h,g)},null,8,["modelValue","onUpdate:modelValue"]),u.value.length>1?(t(),a("button",{key:0,type:"button",class:"button danger",onClick:g=>y(_)},[w(c,{icon:"minus"})],8,_e)):q("",!0),_==u.value.length-1?(t(),a("button",{key:1,type:"button",class:"button primary",onClick:N},[w(c,{icon:"plus"})])):q("",!0)])])]))),256)),ke])]),l("tbody",null,[(t(!0),a(C,null,M(r.value,(h,_)=>(t(),a("tr",{key:`${_}:${e.name}`},[(t(!0),a(C,null,M(h,(g,z)=>(t(),a("td",{key:`${e.name}:${u.value[z].name}:${g.name}`},[l("div",Se,[w(Ie,{modelValue:g.default,"onUpdate:modelValue":P=>g.default=P,name:g.name,type:g.type},null,8,["modelValue","onUpdate:modelValue","name","type"])])]))),128)),l("td",null,[r.value.length>1?(t(),a("button",{key:0,type:"button",class:"button danger",onClick:g=>R(_)},[w(c,{icon:"minus"})],8,Re)):q("",!0),_==r.value.length-1?(t(),a("button",{key:1,type:"button",class:"button secondary",onClick:D},[w(c,{icon:"plus"})])):q("",!0)])]))),128))])])]),_:1},8,["title","showModal","confirmLabel"])],64)}}}),Me=["value"],Ue={value:""},je=["value"],xe=U({__name:"DataSource",props:{modelValue:{required:!0},name:{type:String,required:!1}},emits:["update:modelValue"],setup(e,{emit:$}){const{sources:n}=de(),s=$,p=u=>{const r=u.target;s("update:modelValue",r.value)};return(u,r)=>(t(),a("select",{class:"input w-full",onChange:p,value:e.modelValue},[l("option",Ue,v(u.$t("placeholders.select")),1),(t(!0),a(C,null,M(k(n),V=>(t(),a("option",{value:V.name},v(V.name),9,je))),256))],40,Me))}}),Ne=["value"],De={value:""},Le=["value"],Te=U({__name:"Action",props:{modelValue:{required:!0},name:{type:String,required:!1}},emits:["update:modelValue"],setup(e,{emit:$}){const{actions:n}=pe(),s=$,p=u=>{const r=u.target;s("update:modelValue",r.value)};return(u,r)=>(t(),a("select",{class:"input w-full",onChange:p,value:e.modelValue},[l("option",De,v(u.$t("placeholders.select")),1),(t(!0),a(C,null,M(k(n),V=>(t(),a("option",{value:V.name},v(V.name),9,Le))),256))],40,Ne))}}),Ae=["value","placeholder"],Ee=["placeholder"],Ie=U({__name:"ControlTypeSelector",props:{type:{type:String,required:!0},modelValue:{type:[String,Number,Object,null,void 0],required:!0},name:{type:String,required:!0},defaultValue:{type:[String,Number,Object,null,void 0]}},emits:["update:modelValue"],setup(e,{emit:$}){const n=e,s=$,p=d=>{s("update:modelValue",d.target.value)},u=d=>{s("update:modelValue",d)},r=d=>{s("update:modelValue",d)},V=d=>{s("update:modelValue",d)},j=d=>{s("update:modelValue",d)},{type:b}=W(n);return X(b,()=>{s("update:modelValue","")}),(d,m)=>(t(),a(C,null,[k(b)==="text"?(t(),a("input",{key:0,type:"text",class:"input w-full",value:e.modelValue||e.defaultValue,onInput:m[0]||(m[0]=f=>p(f)),placeholder:d.$t("components.placeholders.defaultValue")},null,40,Ae)):q("",!0),k(b)==="textarea"?(t(),a("textarea",{key:1,class:"input w-full",onInput:m[1]||(m[1]=f=>p(f)),placeholder:d.$t("components.placeholders.defaultValue")},v(e.modelValue||e.defaultValue),41,Ee)):k(b)==="resource"?(t(),x(be,{key:2,modelValue:e.modelValue||e.defaultValue,"onUpdate:modelValue":m[2]||(m[2]=f=>u(f))},null,8,["modelValue"])):k(b)==="datatable"?(t(),x(qe,{key:3,name:e.name,modelValue:e.modelValue||e.defaultValue,"onUpdate:modelValue":m[3]||(m[3]=f=>r(f))},null,8,["name","modelValue"])):k(b)==="datasource"?(t(),x(xe,{key:4,name:e.name,modelValue:e.modelValue||e.defaultValue,"onUpdate:modelValue":m[4]||(m[4]=f=>V(f))},null,8,["name","modelValue"])):k(b)==="action"?(t(),x(Te,{key:5,name:e.name,modelValue:e.modelValue||e.defaultValue,"onUpdate:modelValue":m[5]||(m[5]=f=>j(f))},null,8,["name","modelValue"])):q("",!0)],64))}});export{se as _,pe as a,Ie as b,de as u};
