import{d as g,u as _,x as w,v as x,e as d,g as C,r as D,o as y,c as $,h as e,t as l,a as p,w as k,y as N,z as U,q as S,F as V,s as m,j as B}from"./index-0d1f3313.js";import{C as F}from"./Form-e0cba56b.js";import{_ as M}from"./Dialog.vue_vue_type_script_setup_true_lang-435bc5e4.js";import{b as R,d as T,u as q,m as E}from"./ComponentService-3dc17eda.js";import{c as I}from"./helpers-315eb150.js";import"./CodeEditor.vue_vue_type_script_setup_true_lang-2192ba88.js";import"./ResourceService-303ee50b.js";import"./LocalStorageService-61e16c7a.js";import"./Modal.vue_vue_type_script_setup_true_lang-67cc9f5d.js";import"./ResourcePreview-8f4c5072.js";import"./vuedraggable.umd-174a2cc0.js";import"./Tabs-063c9ddc.js";import"./ComponentPreview.vue_vue_type_script_setup_true_lang-d98e3bdc.js";const j=["onSubmit"],z={class:"flex flex-col mb-4 w-full"},L={class:"title"},W={class:"flex flex-col md:flex-row gap-2 items-end"},A={class:"flex w-full gap-2"},G={class:"flex"},H={type:"submit",class:"button primary"},J={class:"ml-auto flex flex-col gap-2 md:w-1/3"},K={class:"label"},O=["placeholder"],re=g({__name:"Edit",setup(P){const{t:a}=_(),c=w(),u=x(),i=d(!1),r=+c.params.component,t=d({name:"",html:"",variables:[]}),v=()=>{q({id:r,html:t.value.html,variables:E(t.value.variables),name:t.value.name}).then(()=>{I(),m({title:a("toasts.success"),message:a("components.toasts.updated"),type:"success"})}).catch(()=>{m({title:a("toasts.error"),message:a("components.toasts.errorUpdated"),type:"error"})})},f=()=>{i.value=!0},h=()=>{T(r).then(()=>{u.push({name:"components.index"}),m({title:a("toasts.success"),message:a("components.toasts.deleted"),type:"success"})}).catch(()=>{m({title:a("toasts.error"),message:a("components.toasts.errorDeleted"),type:"error"})})};return C(()=>{R(r,{withData:!1}).then(o=>{const s=o.data.data;t.value=s})}),(o,s)=>{const b=D("router-link");return y(),$(V,null,[e("form",{class:"overflow-hidden h-full flex flex-col",onSubmit:S(v,["prevent"])},[e("div",z,[e("h1",L,l(o.$t("components.titles.editComponent")),1),e("div",W,[e("div",A,[e("div",G,[p(b,{class:"button default",to:{name:"components.index"}},{default:k(()=>[B(l(o.$t("buttons.back")),1)]),_:1},8,["to"])]),e("div",null,[e("button",{onClick:f,type:"button",class:"button danger"},l(o.$t("buttons.delete")),1)]),e("div",null,[e("button",H,l(o.$t("buttons.save")),1)])]),e("div",J,[e("label",K,l(o.$t("components.labels.componentName")),1),N(e("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=n=>t.value.name=n),required:"",class:"input",placeholder:o.$t("components.placeholders.componentName")},null,8,O),[[U,t.value.name]])])])]),p(F,{code:t.value.html,"onUpdate:code":s[1]||(s[1]=n=>t.value.html=n),variables:t.value.variables,"onUpdate:variables":s[2]||(s[2]=n=>t.value.variables=n),component:t.value},null,8,["code","variables","component"])],40,j),p(M,{showDialog:i.value,"onUpdate:showDialog":s[3]||(s[3]=n=>i.value=n),title:o.$t("components.dialogs.delete.title"),message:o.$t("components.dialogs.delete.message",{name:t.value.name}),onConfirm:h},null,8,["showDialog","title","message"])],64)}}});export{re as default};
