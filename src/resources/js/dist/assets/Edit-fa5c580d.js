import{d as w,u as h,x as P,v as U,e as l,g as T,o as y,c as $,h as b,a as g,q as k,F as B,s as u}from"./index-0d1f3313.js";import{P as C,a as F}from"./Form-aa9e9e81.js";import{_ as R}from"./Dialog.vue_vue_type_script_setup_true_lang-435bc5e4.js";import{j as E,k as I,m as M,c as N}from"./helpers-315eb150.js";import"./vuedraggable.umd-174a2cc0.js";import"./ComponentService-3dc17eda.js";import"./ComponentFloatingPreview-01b5b00d.js";import"./Accordion.vue_vue_type_script_setup_true_lang-a1ef40dd.js";import"./ComponentPreview.vue_vue_type_script_setup_true_lang-d98e3bdc.js";import"./ResourceService-303ee50b.js";import"./LocalStorageService-61e16c7a.js";import"./Modal.vue_vue_type_script_setup_true_lang-67cc9f5d.js";import"./ResourcePreview-8f4c5072.js";const S=["onSubmit"],X=w({__name:"Edit",setup(V){const{t:s}=h(),d=P(),c=U(),a=l(""),r=l(""),n=l(""),p=l(!1),i=l([]),m=+d.params.page,v=()=>{M({id:m,name:a.value,url:r.value,title:n.value,sections:i.value}).then(()=>{N(),u({title:s("toasts.success"),message:s("pages.toasts.updated"),type:"success"})}).catch(()=>{u({title:s("toasts.error"),message:s("pages.toasts.errorUpdated"),type:"error"})})},f=()=>{p.value=!0},D=()=>{I(m).then(()=>{c.push({name:"pages.index"}),u({title:s("toasts.success"),message:s("pages.toasts.deleted"),type:"success"})}).catch(()=>{u({title:s("toasts.error"),message:s("pages.toasts.errorDeleted"),type:"error"})})};return T(()=>{E(m,{withData:!0}).then(o=>{const e=o.data.data;a.value=e.name,r.value=e.url,n.value=e.title,i.value=e.sections})}),(o,e)=>(y(),$(B,null,[b("form",{onSubmit:k(v,["prevent"])},[g(C,{title:o.$t("pages.titles.editPage"),showDelete:!0,onDelete:f,name:a.value,"onUpdate:name":e[0]||(e[0]=t=>a.value=t),url:r.value,"onUpdate:url":e[1]||(e[1]=t=>r.value=t),pageTitle:n.value,"onUpdate:pageTitle":e[2]||(e[2]=t=>n.value=t)},null,8,["title","name","url","pageTitle"]),g(F,{sections:i.value,"onUpdate:sections":e[3]||(e[3]=t=>i.value=t)},null,8,["sections"])],40,S),g(R,{showDialog:p.value,"onUpdate:showDialog":e[4]||(e[4]=t=>p.value=t),title:o.$t("pages.dialogs.delete.title"),message:o.$t("pages.dialogs.delete.message",{name:a.value}),onConfirm:D},null,8,["showDialog","title","message"])],64))}});export{X as default};
