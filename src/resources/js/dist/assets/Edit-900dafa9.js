import{d as w,u as D,q as y,x as S,e as l,g as $,r as k,o as C,c as U,h as a,t as c,a as m,w as x,v as A,F as B,s as u,j as N}from"./index-19d8f0e7.js";import{_ as V}from"./Form.vue_vue_type_script_setup_true_lang-9dfa24a0.js";import{_ as E}from"./Dialog.vue_vue_type_script_setup_true_lang-c081acb4.js";import{a as F,d as I,b as M}from"./ScriptService-b9b20be7.js";import"./CodeEditor.vue_vue_type_script_setup_true_lang-2e8f1f00.js";import"./helpers-d1a74e74.js";const R=["onSubmit"],T={class:"flex flex-col gap-4 mb-4 w-full"},j={class:"title"},q={class:"flex gap-2"},z={type:"submit",class:"button primary"},Q=w({__name:"Edit",setup(G){const{t:e}=D(),v=y(),f=S(),n=l(""),i=l(""),p=l(!1),r=l(!1),d=+f.params.script,g=()=>{M({id:d,name:i.value,scripts:n.value,is_active:!!r.value}).then(()=>{u({title:e("toasts.success"),message:e("scripts.toasts.updated"),type:"success"})}).catch(()=>{u({title:e("toasts.error"),message:e("scripts.toasts.errorUpdated"),type:"error"})})},_=()=>{p.value=!0},b=()=>{I(d).then(()=>{v.push({name:"scripts.index"}),u({title:e("toasts.success"),message:e("scripts.toasts.deleted"),type:"success"})}).catch(()=>{u({title:e("toasts.error"),message:e("scripts.toasts.errorDeleted"),type:"error"})})};return $(()=>{F(d).then(({data:s})=>{const t=s.data;n.value=t.scripts,i.value=t.name,r.value=t.is_active})}),(s,t)=>{const h=k("router-link");return C(),U(B,null,[a("form",{onSubmit:A(g,["prevent"])},[a("div",T,[a("h1",j,c(s.$t("scripts.titles.updateScript")),1),a("div",q,[m(h,{class:"button default",to:{name:"scripts.index"}},{default:x(()=>[N(c(s.$t("buttons.back")),1)]),_:1},8,["to"]),a("button",{onClick:_,type:"button",class:"button danger"},c(s.$t("buttons.delete")),1),a("button",z,c(s.$t("buttons.save")),1)])]),m(V,{code:n.value,"onUpdate:code":t[0]||(t[0]=o=>n.value=o),name:i.value,"onUpdate:name":t[1]||(t[1]=o=>i.value=o),isActive:r.value,"onUpdate:isActive":t[2]||(t[2]=o=>r.value=o)},null,8,["code","name","isActive"])],40,R),m(E,{showDialog:p.value,"onUpdate:showDialog":t[3]||(t[3]=o=>p.value=o),title:s.$t("scripts.dialogs.delete.title"),message:s.$t("scripts.dialogs.delete.message",{name:i.value}),onConfirm:b},null,8,["showDialog","title","message"])],64)}}});export{Q as default};
