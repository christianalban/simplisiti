import{d as g,u as _,x as w,q as C,e as d,g as D,r as y,o as x,c as $,h as t,t as l,a as p,w as k,y as N,z as U,v as S,F as V,s as m,j as B}from"./index-53847a5f.js";import{C as F}from"./Form-cdbd2a78.js";import{_ as M}from"./Dialog.vue_vue_type_script_setup_true_lang-8eb793dd.js";import{a as T,d as q,u as E,m as I}from"./ComponentService-e247c513.js";import"./CodeEditor.vue_vue_type_script_setup_true_lang-8577050e.js";import"./ResourceService-7d3a1bfa.js";import"./LocalStorageService-68aa5176.js";import"./Modal.vue_vue_type_script_setup_true_lang-cad7392d.js";import"./ResourcePreview-f6320a26.js";import"./vuedraggable.umd-51241ac4.js";import"./PageService-d0a72512.js";import"./helpers-d7cd10d6.js";import"./Tabs-eb5dcfc0.js";import"./ComponentPreview.vue_vue_type_script_setup_true_lang-55d3db3a.js";const R=["onSubmit"],j={class:"flex flex-col mb-4 w-full"},z={class:"title"},W={class:"flex gap-2 items-end"},A={class:"flex"},G={type:"submit",class:"button primary"},H={class:"ml-auto flex flex-col gap-2 md:w-1/3"},J={class:"label"},K=["placeholder"],ie=g({__name:"Edit",setup(L){const{t:a}=_(),u=w(),c=C(),i=d(!1),r=+u.params.component,e=d({name:"",html:"",variables:[]}),v=()=>{E({id:r,html:e.value.html,variables:I(e.value.variables),name:e.value.name}).then(()=>{m({title:a("toasts.success"),message:a("components.toasts.updated"),type:"success"})}).catch(()=>{m({title:a("toasts.error"),message:a("components.toasts.errorUpdated"),type:"error"})})},h=()=>{i.value=!0},f=()=>{q(r).then(()=>{c.push({name:"components.index"}),m({title:a("toasts.success"),message:a("components.toasts.deleted"),type:"success"})}).catch(()=>{m({title:a("toasts.error"),message:a("components.toasts.errorDeleted"),type:"error"})})};return D(()=>{T(r,{withData:!1}).then(o=>{const s=o.data.data;e.value=s})}),(o,s)=>{const b=y("router-link");return x(),$(V,null,[t("form",{class:"overflow-hidden h-full flex flex-col",onSubmit:S(v,["prevent"])},[t("div",j,[t("h1",z,l(o.$t("components.titles.editComponent")),1),t("div",W,[t("div",A,[p(b,{class:"button default",to:{name:"components.index"}},{default:k(()=>[B(l(o.$t("buttons.back")),1)]),_:1},8,["to"])]),t("div",null,[t("button",{onClick:h,type:"button",class:"button danger"},l(o.$t("buttons.delete")),1)]),t("div",null,[t("button",G,l(o.$t("buttons.save")),1)]),t("div",H,[t("label",J,l(o.$t("components.labels.componentName")),1),N(t("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=n=>e.value.name=n),required:"",class:"input",placeholder:o.$t("components.placeholders.componentName")},null,8,K),[[U,e.value.name]])])])]),p(F,{code:e.value.html,"onUpdate:code":s[1]||(s[1]=n=>e.value.html=n),variables:e.value.variables,"onUpdate:variables":s[2]||(s[2]=n=>e.value.variables=n),component:e.value},null,8,["code","variables","component"])],40,R),p(M,{showDialog:i.value,"onUpdate:showDialog":s[3]||(s[3]=n=>i.value=n),title:o.$t("components.dialogs.delete.title"),message:o.$t("components.dialogs.delete.message",{name:e.value.name}),onConfirm:f},null,8,["showDialog","title","message"])],64)}}});export{ie as default};
