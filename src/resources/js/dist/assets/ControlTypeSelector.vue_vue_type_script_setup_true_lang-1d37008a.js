import{d as j,o,c as n,g as t,t as $,b as R,e as L,r as E,a as b,w as I,i as P,q as z,C as A,F as C,h as M,f as G,k as _,z as H,A as J,l as S,j as T}from"./index-f5429b37.js";import{_ as O}from"./Modal.vue_vue_type_script_setup_true_lang-865ffb59.js";import{u as K}from"./ResourceService-f76e7129.js";import{R as D}from"./ResourcePreview-b5f5bf65.js";import{v as Q}from"./helpers-598837fa.js";const W=["value"],X={value:"text"},Y={value:"textarea"},Z={value:"resource"},ee={value:"datatable"},te=j({__name:"VariableTypeSelector",props:{modelValue:{type:String,required:!0}},emits:["update:modelValue"],setup(a){const g=u=>u.target.value;return(u,s)=>(o(),n("select",{class:"input",value:a.modelValue,onChange:s[0]||(s[0]=v=>u.$emit("update:modelValue",g(v)))},[t("option",X,$(u.$t("components.types.text")),1),t("option",Y,$(u.$t("components.types.textarea")),1),t("option",Z,$(u.$t("components.types.resource")),1),t("option",ee,$(u.$t("components.types.datatable")),1)],40,W))}}),le={class:"w-full flex items-center justify-center max-h-full"},oe={class:"absolute top-1/4 bg-teal-500 rounded-lg text-white text-xs p-1 bg-opacity-50"},ae={class:"flex justify-between mb-4"},ne=["placeholder"],ue={class:"grid grid-cols-3 gap-2 overflow-y-auto max-h-[70vh]"},se=["onClick"],re=j({__name:"ResourcePicker",props:{modelValue:{type:[Number,String,Object,void 0],required:!0}},emits:["update:modelValue"],setup(a,{emit:g}){const u=a,s=R(!1),v=R(""),{resources:c,loadResources:r,resourceFromId:m}=K(),i=L(()=>c.value.filter(p=>p.name.toLowerCase().includes(v.value.toLowerCase()))),d=L(()=>{if(u.modelValue!==void 0)return m(+u.modelValue)}),h=g,x=()=>{s.value=!0},N=p=>{h("update:modelValue",p),s.value=!1},U=()=>{r()};return(p,k)=>{var e;const q=E("fa-icon");return o(),n(C,null,[t("button",{onClick:x,type:"button",class:"button secondary flex gap-2 w-full flex-col justify-start !p-1 relative items-center"},[t("div",le,[b(D,{url:(e=d.value)==null?void 0:e.url},null,8,["url"])]),t("span",oe,$(d.value?p.$t("components.buttons.changeResource"):p.$t("components.buttons.selectResource")),1)]),b(O,{title:p.$t("components.titles.selectResource"),showModal:s.value,"onUpdate:showModal":k[1]||(k[1]=l=>s.value=l),showCancel:!1,confirmLabel:p.$t("buttons.close")},{default:I(()=>[t("div",ae,[t("button",{type:"button",onClick:U,class:"button secondary"},[b(q,{icon:"arrow-rotate-right"}),P(" "+$(p.$t("components.buttons.refresh")),1)]),z(t("input",{type:"search","onUpdate:modelValue":k[0]||(k[0]=l=>v.value=l),class:"input",placeholder:p.$t("placeholders.search")},null,8,ne),[[A,v.value]])]),t("div",ue,[(o(!0),n(C,null,M(i.value,l=>(o(),n("button",{type:"button",onClick:y=>N(l.id),class:"button primary flex flex-col gap-2 justify-center items-center"},[b(D,{url:l.url},null,8,["url"]),t("span",null,$(l.name),1)],8,se))),256))])]),_:1},8,["title","showModal","confirmLabel"])],64)}}}),ce={class:"w-52 flex"},de={class:"w-full form-group"},me=["value","onInput","placeholder"],ie=["onClick"],pe=t("th",null," Â  ",-1),fe={class:"w-52 flex"},ve=["onClick"],he=j({__name:"DataTable",props:{modelValue:{type:[Object,String,Number,void 0],required:!0},name:{type:String,required:!1}},emits:["update:modelValue"],setup(a,{emit:g}){const u=a,s=({type:e,name:l}={type:"text",name:""})=>({name:l,type:e,value:"",default:""}),v=(e="text")=>({name:"",type:e}),c=R([v()]),r=R([[s()]]),m=R(!1),i=g,d=()=>{m.value=!0},h=()=>{i("update:modelValue",{columns:c.value,rows:r.value}),m.value=!1},x=(e,l,y)=>{l.type=y,r.value.forEach(f=>{f[e].type=l.type})},N=(e,l,y)=>{l.name=Q(y),r.value.forEach(f=>{f[e].name=l.name})},U=()=>{c.value.push(v()),r.value.forEach(e=>{e.push(s())})},p=()=>{const e=[];c.value.forEach(({type:l,name:y})=>{e.push(s({type:l,name:y}))}),r.value.push(e)},k=e=>{c.value.splice(e,1),r.value.forEach(l=>{l.splice(e,1)})},q=e=>{r.value.splice(e,1)};return G(()=>{u.modelValue&&typeof u.modelValue=="object"&&(c.value=u.modelValue.columns,r.value=u.modelValue.rows)}),(e,l)=>{const y=E("fa-icon");return o(),n(C,null,[t("button",{onClick:d,type:"button",class:"button secondary flex gap-2 w-full"},[t("span",null,$(e.$t("components.buttons.fillData")),1)]),b(O,{title:e.$t("components.titles.fillData"),showModal:m.value,"onUpdate:showModal":l[0]||(l[0]=f=>m.value=f),showCancel:!1,confirmLabel:e.$t("buttons.close"),resetOnClose:!1,onConfirm:h},{default:I(()=>[t("table",null,[t("thead",null,[t("tr",null,[(o(!0),n(C,null,M(c.value,(f,w)=>(o(),n("th",null,[t("div",ce,[t("div",de,[t("input",{class:"input",type:"text",value:f.name,onInput:V=>N(w,f,V.target),placeholder:e.$t("components.placeholders.dataName")},null,40,me),b(te,{class:"w-5",modelValue:f.type,"onUpdate:modelValue":V=>x(w,f,V)},null,8,["modelValue","onUpdate:modelValue"]),c.value.length>1?(o(),n("button",{key:0,type:"button",class:"button danger",onClick:V=>k(w)},[b(y,{icon:"minus"})],8,ie)):_("",!0),w==c.value.length-1?(o(),n("button",{key:1,type:"button",class:"button primary",onClick:U},[b(y,{icon:"plus"})])):_("",!0)])])]))),256)),pe])]),t("tbody",null,[(o(!0),n(C,null,M(r.value,(f,w)=>(o(),n("tr",{key:`${w}:${a.name}`},[(o(!0),n(C,null,M(f,(V,B)=>(o(),n("td",{key:`${a.name}:${c.value[B].name}:${V.name}`},[t("div",fe,[b(be,{modelValue:V.default,"onUpdate:modelValue":F=>V.default=F,name:V.name,type:V.type},null,8,["modelValue","onUpdate:modelValue","name","type"])])]))),128)),t("td",null,[r.value.length>1?(o(),n("button",{key:0,type:"button",class:"button danger",onClick:V=>q(w)},[b(y,{icon:"minus"})],8,ve)):_("",!0),w==r.value.length-1?(o(),n("button",{key:1,type:"button",class:"button secondary",onClick:p},[b(y,{icon:"plus"})])):_("",!0)])]))),128))])])]),_:1},8,["title","showModal","confirmLabel"])],64)}}}),ye=["value","placeholder"],Ve=["placeholder"],be=j({__name:"ControlTypeSelector",props:{type:{type:String,required:!0},modelValue:{type:[String,Number,Object,null,void 0],required:!0},name:{type:String,required:!0},defaultValue:{type:[String,Number,Object,null,void 0]}},emits:["update:modelValue"],setup(a,{emit:g}){const u=a,s=g,v=i=>{s("update:modelValue",i.target.value)},c=i=>{s("update:modelValue",i)},r=i=>{s("update:modelValue",i)},{type:m}=H(u);return J(m,()=>{s("update:modelValue","")}),(i,d)=>(o(),n(C,null,[S(m)==="text"?(o(),n("input",{key:0,type:"text",class:"input w-full",value:a.modelValue||a.defaultValue,onInput:d[0]||(d[0]=h=>v(h)),placeholder:i.$t("components.placeholders.defaultValue")},null,40,ye)):_("",!0),S(m)==="textarea"?(o(),n("textarea",{key:1,class:"input w-full",onInput:d[1]||(d[1]=h=>v(h)),placeholder:i.$t("components.placeholders.defaultValue")},$(a.modelValue||a.defaultValue),41,Ve)):S(m)==="resource"?(o(),T(re,{key:2,modelValue:a.modelValue||a.defaultValue,"onUpdate:modelValue":d[2]||(d[2]=h=>c(h))},null,8,["modelValue"])):S(m)==="datatable"?(o(),T(he,{key:3,name:a.name,modelValue:a.modelValue||a.defaultValue,"onUpdate:modelValue":d[3]||(d[3]=h=>r(h))},null,8,["name","modelValue"])):_("",!0)],64))}});export{te as _,be as a};
