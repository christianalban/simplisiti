import{v as U,i as j}from"./helpers-6321440c.js";import{D as k}from"./vuedraggable.umd-a3e46a7a.js";import{g as q}from"./ComponentService-e77daeed.js";import{d as S,r as x,o as M,g as c,b as m,e,t as a,h as f,w as C,p as b,F as V,f as A,k as y,_ as w,a as P,j as T,q as z}from"./index-142e603b.js";import{b as O,c as G}from"./ControlTypeSelector.vue_vue_type_script_setup_true_lang-ccee853f.js";import{u as E}from"./ResourceService-e8fff348.js";const J={class:"font-bold"},K={class:"tile h-24 cursor-pointer"},Q={class:"tile-title cursor-pointer"},W=S({__name:"AvailableComponents",setup(u){const h=x([]),$=i=>({id:i.id||1+1,...i,variables:i.variables.map(r=>({...r}))});return M(()=>{q().then(i=>{h.value=i.data.data})}),(i,r)=>(c(),m(V,null,[e("h2",J,a(i.$t("pages.titles.availableComponents")),1),f(b(k),{class:"grid grid-cols-2 gap-4",modelValue:h.value,"onUpdate:modelValue":r[0]||(r[0]=l=>h.value=l),group:{name:"components",pull:"clone",put:!1},sort:!1,clone:$,"item-key":"id"},{item:C(({element:l})=>[e("div",K,[e("label",Q,a(l.name),1)])]),_:1},8,["modelValue"])],64))}}),X={class:"flex gap-2"},Y={class:"font-bold"},Z={key:0,class:"flex flex-col gap-4"},ee={key:0,class:"flex flex-col gap-2"},te={class:"label"},oe=["value","onInput","placeholder"],le={key:1,class:"flex flex-col gap-2"},se={class:"label"},ne={key:2,class:"flex flex-col gap-2"},ae={class:"label"},de=S({__name:"ComponentConfigurationForm",props:{component:{type:Object}},emits:["exit"],setup(u){const{resources:h}=E(),$=(l,d)=>{var t;l.default=d,l.value=((t=h.value.find(p=>p.id===d))==null?void 0:t.url)??""},i=(l,d)=>{const t=d.target.value;l.default=t,l.value=t},r=(l,d)=>{l.default=d};return(l,d)=>(c(),m(V,null,[e("div",X,[e("h2",Y,a(l.$t("pages.titles.componentConfigurationForm")),1),e("button",{type:"button",class:"button small default",onClick:d[0]||(d[0]=t=>l.$emit("exit"))},a(l.$t("pages.buttons.exit")),1)]),u.component?(c(),m("div",Z,[(c(!0),m(V,null,A(u.component.variables,t=>(c(),m("div",{key:t.name},[t.type==="text"?(c(),m("div",ee,[e("label",te,a(t.name),1),e("input",{class:"input",type:"text",value:t.default,onInput:p=>i(t,p),placeholder:t.name},null,40,oe)])):t.type==="resource"?(c(),m("div",le,[e("label",se,a(t.name),1),f(O,{modelValue:t.default,"onUpdate:modelValue":p=>$(t,p)},null,8,["modelValue","onUpdate:modelValue"])])):t.type==="datatable"?(c(),m("div",ne,[e("label",ae,a(t.name),1),f(G,{modelValue:t.default,"onUpdate:modelValue":p=>r(t,p)},null,8,["modelValue","onUpdate:modelValue"])])):y("",!0)]))),128))])):y("",!0)],64))}});const ie=w(de,[["__scopeId","data-v-59df9a62"]]),ce={class:"grid grid-cols-4 gap-4"},ue={class:"flex flex-col gap-4 col-span-1"},re={class:"flex flex-col gap-2"},pe={class:"label"},me=["value","placeholder"],_e={class:"flex flex-col gap-4 col-span-3"},ge={class:"flex gap-4"},fe={class:"w-1/3 flex flex-col gap-2"},he={class:"label"},ve=["value","placeholder"],be={class:"w-2/3 flex flex-col gap-2"},$e={class:"label"},xe=["value","placeholder"],Ce={class:"font-bold"},ye={class:"flex flex-col"},ke={class:"mb-4 p-4 bg-blue-100 rounded-lg cursor-move hover:bg-blue-200 relative"},Ve={class:"text-blue-500"},Se=["onClick"],Fe={class:"form-group absolute left-0 top-0 flex"},Ue={class:"text-blue-500 mr-2"},Te=["onClick"],Me=["onClick"],we={class:"flex flex-col w-full h-full"},Ee={class:"italic text-blue-500 cursor-move ml-auto mr-2"},Ne=["innerHTML"],Be={class:"text-blue-900 italic text-sm pt-2"},De=S({__name:"Form",props:{name:{type:String,default:""},url:{type:String,default:""},title:{type:String,default:""},sections:{type:Array,default:()=>[]}},emits:["update:name","update:title","update:url","update:sections"],setup(u,{emit:h}){const{loadResources:$}=E(),i=u,r=h;x([]);const l=x(null),d=x(null),t=x("adding-component"),p=()=>{r("update:sections",[...i.sections,{order:0,components:[]}])},N=o=>{const s=[...i.sections];s.splice(o,1),r("update:sections",s)},B=(o,s)=>{o.splice(s,1)},D=(o,s)=>{t.value="editing-component",l.value=o,d.value=s},I=()=>{t.value="adding-component",l.value=null,d.value=null},H=o=>o.variables.reduce((_,n)=>{var v;return _.replace(`{{ $${n.name} }}`,((v=n.value)==null?void 0:v.toString())||"")},o.html),L=(o,s)=>{var _,n;return((_=l.value)==null?void 0:_.id)===o.id&&o.order===((n=l.value)==null?void 0:n.order)&&d.value===s};return M(()=>{$()}),(o,s)=>{const _=P("fa-icon");return c(),m("div",ce,[e("div",ue,[e("div",re,[e("label",pe,a(o.$t("pages.labels.pageName")),1),e("input",{class:"input",type:"text",required:"",value:u.name,onInput:s[0]||(s[0]=n=>o.$emit("update:name",b(U)(n.target))),placeholder:o.$t("pages.placeholders.pageName")},null,40,me)]),t.value==="adding-component"?(c(),T(W,{key:0})):y("",!0),t.value==="editing-component"?(c(),T(ie,{key:1,component:l.value,onExit:I},null,8,["component"])):y("",!0)]),e("div",_e,[e("div",ge,[e("div",fe,[e("label",he,a(o.$t("pages.labels.pageTitle")),1),e("input",{class:"input",type:"text",value:u.title,onInput:s[1]||(s[1]=n=>o.$emit("update:title",b(j)(n.target))),placeholder:o.$t("pages.placeholders.pageTitle")},null,40,ve)]),e("div",be,[e("label",$e,a(o.$t("pages.labels.pageUrl")),1),e("input",{class:"input",type:"text",value:u.url,onInput:s[2]||(s[2]=n=>o.$emit("update:url",b(U)(n.target))),placeholder:o.$t("pages.placeholders.pageUrl")},null,40,xe)])]),e("h2",Ce,a(o.$t("pages.titles.sections")),1),e("div",ye,[f(b(k),{list:u.sections,class:"flex flex-col",onInput:s[3]||(s[3]=n=>o.$emit("update:sections",n)),group:"sections","item-key":"id"},{item:C(({element:n,index:v})=>[e("div",ke,[e("span",Ve," #"+a((n.order=v)+1),1),e("button",{class:"button danger absolute right-0 top-0 small",onClick:g=>N(v)},[f(_,{icon:"trash"})],8,Se),f(b(k),{class:"border-2 p-4 border-blue-300 rounded-lg border-dashed flex flex-col gap-4",modelValue:n.components,"onUpdate:modelValue":g=>n.components=g,group:"components","item-key":"id"},{item:C(({element:g,index:F})=>[e("div",{class:z(["tile h-24 cursor-move relative",{"!border-orange-300":L(g,v)}])},[e("div",Fe,[e("span",Ue," #"+a((g.order=F)+1),1),e("button",{class:"button danger small",type:"button",onClick:R=>B(n.components,F)},[f(_,{icon:"trash"})],8,Te),e("button",{class:"button default small",type:"button",onClick:R=>D(g,v)},[f(_,{icon:"file-invoice"})],8,Me)]),e("div",we,[e("label",Ee,a(g.name),1),e("div",{innerHTML:H(g)},null,8,Ne)])],2)]),_:2},1032,["modelValue","onUpdate:modelValue"])])]),default:C(()=>[e("p",Be,a(o.$t("pages.labels.addComponentsToSection")),1)]),_:1},8,["list"]),e("button",{class:"button primary",onClick:p,type:"button"},a(o.$t("pages.buttons.addSection")),1)])])])}}});const Ae=w(De,[["__scopeId","data-v-57d46299"]]);export{Ae as P};
