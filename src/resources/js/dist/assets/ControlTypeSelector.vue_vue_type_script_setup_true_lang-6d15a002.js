import{b as R,q as A,d as j,o as e,c as a,g as t,t as f,e as L,r as E,a as w,w as I,v as G,i as H,x as J,D as K,F as C,h as U,f as Q,k as M,l as S,A as W,B as X,j as D}from"./index-e83e87ae.js";import{_ as B}from"./Modal.vue_vue_type_script_setup_true_lang-38c2634f.js";import{u as Y}from"./ResourceService-97753ebe.js";import{R as T}from"./ResourcePreview-407239db.js";import{v as Z}from"./helpers-66e66eca.js";const O=R([]),ee=async()=>await A.get("source"),te=async()=>{const r=await ee();O.value=r.data.data},oe=()=>({sources:O,loadSources:te}),F=R([]),le=async()=>await A.get("action"),ae=async()=>{const r=await le();F.value=r.data.data},ne=()=>({actions:F,loadActions:ae}),se=["value"],ue={value:"text"},re={value:"textarea"},ce={value:"resource"},de={value:"datatable"},ie={value:"datasource"},me={value:"action"},pe=j({__name:"VariableTypeSelector",props:{modelValue:{type:String,required:!0}},emits:["update:modelValue"],setup(r){const $=o=>o.target.value;return(o,s)=>(e(),a("select",{class:"input",value:r.modelValue,onChange:s[0]||(s[0]=p=>o.$emit("update:modelValue",$(p)))},[t("option",ue,f(o.$t("components.types.text")),1),t("option",re,f(o.$t("components.types.textarea")),1),t("option",ce,f(o.$t("components.types.resource")),1),t("option",de,f(o.$t("components.types.datatable")),1),t("option",ie,f(o.$t("components.types.datasource")),1),t("option",me,f(o.$t("components.types.action")),1)],40,se))}}),ve={class:"w-full flex items-center justify-center max-h-full"},fe={class:"absolute top-1/4 bg-teal-500 rounded-lg text-white text-xs p-1 bg-opacity-50"},he={class:"flex justify-between mb-4"},ye=["placeholder"],Ve={class:"grid grid-cols-3 gap-2 overflow-y-auto max-h-[70vh]"},$e=["onClick"],be=j({__name:"ResourcePicker",props:{modelValue:{required:!0}},emits:["update:modelValue"],setup(r,{emit:$}){const o=r,s=R(!1),p=R(""),n=R(!1),{resources:u,loadResources:h,resourceFromId:x}=Y(),b=L(()=>u.value.filter(V=>V.name.toLowerCase().includes(p.value.toLowerCase()))),_=L(()=>{if(!(o.modelValue===void 0||o.modelValue===null))return x(+o.modelValue)}),i=$,m=()=>{s.value=!0},v=V=>{i("update:modelValue",V),s.value=!1},N=()=>{n.value=!0,h().finally(()=>{n.value=!1})};return(V,q)=>{var d;const l=E("fa-icon");return e(),a(C,null,[t("button",{onClick:m,type:"button",class:"button secondary flex gap-2 w-full flex-col justify-start !p-1 relative items-center"},[t("div",ve,[w(T,{url:(d=_.value)==null?void 0:d.url},null,8,["url"])]),t("span",fe,f(_.value?V.$t("components.buttons.changeResource"):V.$t("components.buttons.selectResource")),1)]),w(B,{title:V.$t("components.titles.selectResource"),showModal:s.value,"onUpdate:showModal":q[1]||(q[1]=c=>s.value=c),showCancel:!1,confirmLabel:V.$t("buttons.close")},{default:I(()=>[t("div",he,[t("button",{type:"button",onClick:N,class:"button secondary"},[w(l,{icon:"sync",class:G({"animate-spin":n.value})},null,8,["class"]),H(" "+f(V.$t("resources.buttons.refresh")),1)]),J(t("input",{type:"search","onUpdate:modelValue":q[0]||(q[0]=c=>p.value=c),class:"input",placeholder:V.$t("placeholders.search")},null,8,ye),[[K,p.value]])]),t("div",Ve,[(e(!0),a(C,null,U(b.value,c=>(e(),a("button",{type:"button",onClick:y=>v(c.id),class:"button primary flex flex-col gap-2 justify-center items-center"},[w(T,{url:c.url},null,8,["url"]),t("span",null,f(c.name),1)],8,$e))),256))])]),_:1},8,["title","showModal","confirmLabel"])],64)}}}),_e={class:"w-52 flex"},ge={class:"w-full form-group"},we=["value","onInput","placeholder"],Ce=["onClick"],ke=t("th",null," Â  ",-1),Se={class:"w-52 flex"},Re=["onClick"],qe=j({__name:"DataTable",props:{modelValue:{type:[Object,String,Number,void 0],required:!0},name:{type:String,required:!1}},emits:["update:modelValue"],setup(r,{emit:$}){const o=r,s=({type:l,name:d}={type:"text",name:""})=>({name:d,type:l,value:"",default:""}),p=(l="text")=>({name:"",type:l}),n=R([p()]),u=R([[s()]]),h=R(!1),x=$,b=()=>{h.value=!0},_=()=>{x("update:modelValue",{columns:n.value,rows:u.value}),h.value=!1},i=(l,d,c)=>{d.type=c,u.value.forEach(y=>{y[l].type=d.type})},m=(l,d,c)=>{d.name=Z(c),u.value.forEach(y=>{y[l].name=d.name})},v=()=>{n.value.push(p()),u.value.forEach(l=>{l.push(s())})},N=()=>{const l=[];n.value.forEach(({type:d,name:c})=>{l.push(s({type:d,name:c}))}),u.value.push(l)},V=l=>{n.value.splice(l,1),u.value.forEach(d=>{d.splice(l,1)})},q=l=>{u.value.splice(l,1)};return Q(()=>{o.modelValue&&typeof o.modelValue=="object"&&(n.value=o.modelValue.columns,u.value=o.modelValue.rows)}),(l,d)=>{const c=E("fa-icon");return e(),a(C,null,[t("button",{onClick:b,type:"button",class:"button secondary flex items-center justify-center gap-2 w-full"},[t("span",null,f(l.$t("components.buttons.fillData")),1)]),w(B,{title:l.$t("components.titles.fillData"),showModal:h.value,"onUpdate:showModal":d[0]||(d[0]=y=>h.value=y),showCancel:!1,confirmLabel:l.$t("buttons.close"),resetOnClose:!1,onConfirm:_},{default:I(()=>[t("table",null,[t("thead",null,[t("tr",null,[(e(!0),a(C,null,U(n.value,(y,k)=>(e(),a("th",null,[t("div",_e,[t("div",ge,[t("input",{class:"input",type:"text",value:y.name,onInput:g=>m(k,y,g.target),placeholder:l.$t("components.placeholders.dataName")},null,40,we),w(pe,{class:"w-5",modelValue:y.type,"onUpdate:modelValue":g=>i(k,y,g)},null,8,["modelValue","onUpdate:modelValue"]),n.value.length>1?(e(),a("button",{key:0,type:"button",class:"button danger",onClick:g=>V(k)},[w(c,{icon:"minus"})],8,Ce)):M("",!0),k==n.value.length-1?(e(),a("button",{key:1,type:"button",class:"button primary",onClick:v},[w(c,{icon:"plus"})])):M("",!0)])])]))),256)),ke])]),t("tbody",null,[(e(!0),a(C,null,U(u.value,(y,k)=>(e(),a("tr",{key:`${k}:${r.name}`},[(e(!0),a(C,null,U(y,(g,P)=>(e(),a("td",{key:`${r.name}:${n.value[P].name}:${g.name}`},[t("div",Se,[w(Ie,{modelValue:g.default,"onUpdate:modelValue":z=>g.default=z,name:g.name,type:g.type},null,8,["modelValue","onUpdate:modelValue","name","type"])])]))),128)),t("td",null,[u.value.length>1?(e(),a("button",{key:0,type:"button",class:"button danger",onClick:g=>q(k)},[w(c,{icon:"minus"})],8,Re)):M("",!0),k==u.value.length-1?(e(),a("button",{key:1,type:"button",class:"button secondary",onClick:N},[w(c,{icon:"plus"})])):M("",!0)])]))),128))])])]),_:1},8,["title","showModal","confirmLabel"])],64)}}}),Me=["value"],Ue={value:""},je=["value"],xe=j({__name:"DataSource",props:{modelValue:{required:!0},name:{type:String,required:!1}},emits:["update:modelValue"],setup(r,{emit:$}){const{sources:o}=oe(),s=$,p=n=>{const u=n.target;s("update:modelValue",u.value)};return(n,u)=>(e(),a("select",{class:"input w-full",onChange:p,value:r.modelValue},[t("option",Ue,f(n.$t("placeholders.select")),1),(e(!0),a(C,null,U(S(o),h=>(e(),a("option",{value:h.name},f(h.name),9,je))),256))],40,Me))}}),De=["value"],Ne={value:""},Le=["value"],Te=j({__name:"Action",props:{modelValue:{required:!0},name:{type:String,required:!1}},emits:["update:modelValue"],setup(r,{emit:$}){const{actions:o}=ne(),s=$,p=n=>{const u=n.target;s("update:modelValue",u.value)};return(n,u)=>(e(),a("select",{class:"input w-full",onChange:p,value:r.modelValue},[t("option",Ne,f(n.$t("placeholders.select")),1),(e(!0),a(C,null,U(S(o),h=>(e(),a("option",{value:h.name},f(h.name),9,Le))),256))],40,De))}}),Ae=["value","placeholder"],Ee=["placeholder"],Ie=j({__name:"ControlTypeSelector",props:{type:{type:String,required:!0},modelValue:{type:[String,Number,Object,null,void 0],required:!0},name:{type:String,required:!0},defaultValue:{type:[String,Number,Object,null,void 0]},class:{type:String}},emits:["update:modelValue"],setup(r,{emit:$}){const o=r,s=$,p=i=>{s("update:modelValue",i.target.value)},n=i=>{s("update:modelValue",i)},u=i=>{s("update:modelValue",i)},h=i=>{s("update:modelValue",i)},x=i=>{s("update:modelValue",i)},{type:b}=W(o),_=L(()=>o.modelValue||o.defaultValue);return X(b,()=>{s("update:modelValue","")}),(i,m)=>(e(),a(C,null,[S(b)==="text"?(e(),a("input",{key:0,type:"text",class:"input w-full",value:_.value,onInput:m[0]||(m[0]=v=>p(v)),placeholder:i.$t("components.placeholders.defaultValue")},null,40,Ae)):M("",!0),S(b)==="textarea"?(e(),a("textarea",{key:1,class:"input w-full",onInput:m[1]||(m[1]=v=>p(v)),placeholder:i.$t("components.placeholders.defaultValue")},f(_.value),41,Ee)):S(b)==="resource"?(e(),D(be,{key:2,modelValue:_.value,"onUpdate:modelValue":m[2]||(m[2]=v=>n(v))},null,8,["modelValue"])):S(b)==="datatable"?(e(),D(qe,{key:3,name:r.name,modelValue:_.value,"onUpdate:modelValue":m[3]||(m[3]=v=>u(v))},null,8,["name","modelValue"])):S(b)==="datasource"?(e(),D(xe,{key:4,name:r.name,modelValue:_.value,"onUpdate:modelValue":m[4]||(m[4]=v=>h(v))},null,8,["name","modelValue"])):S(b)==="action"?(e(),D(Te,{key:5,name:r.name,modelValue:_.value,"onUpdate:modelValue":m[5]||(m[5]=v=>x(v))},null,8,["name","modelValue"])):M("",!0)],64))}});export{pe as _,Ie as a,ne as b,oe as u};
