import{d as x,i as n,h as B,j as D,k as F,r as w,o as a,c as p,a as l,b as u,m as f,w as k,f as I,F as y,s as $,e as L,t as R,n as j,p as M}from"./index-c42ec8ac.js";import{g as U,c as E}from"./ComponentService-13af19d2.js";import{_ as G,C as S}from"./ComponentFloatingPreview-57667c21.js";import{a as q,l as z,b as A,d as H}from"./helpers-04f3f619.js";import{_ as J}from"./Header.vue_vue_type_script_setup_true_lang-16b25625.js";import{_ as K}from"./Dialog.vue_vue_type_script_setup_true_lang-31f7117f.js";import"./Accordion.vue_vue_type_script_setup_true_lang-49222777.js";import"./ComponentPreview.vue_vue_type_script_setup_true_lang-9d68914c.js";import"./ResourceService-bf8c5a9c.js";const O={class:"flex flex-col gap-4 h-full py-2"},Q={class:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 py-4"},W={class:"flex items-center justify-between gap-2 bg-blue-200 px-2 py-1"},X={class:"flex flex-col"},Y={class:"font-semibold"},Z=["title","onClick","disabled"],ue=x({__name:"Index",setup(ee){const v=n([]),o=n(null),{t:i}=B(),c=n(!1),d=n(""),g=n(!1),m=n(!1),T=e=>{m.value=!0,o.value=e},h=()=>{Promise.all([z(),A()]).then(()=>{U().then(s=>{g.value=!0,v.value=s.data.data})})},N=D(()=>q(v.value)),V=()=>{var e;(e=o.value)!=null&&e.id&&(c.value=!0,E(o.value.id).then(()=>{h(),$({title:i("toasts.success"),message:i("components.toasts.cloned"),type:"success"})}).catch(()=>{$({title:i("toasts.error"),message:i("components.toasts.errorCloned"),type:"error"})}).finally(()=>{m.value=!1,o.value=null,c.value=!1}))};return F(()=>{h()}),(e,s)=>{var b;const _=w("fa-icon"),P=w("router-link");return a(),p(y,null,[l("div",O,[u(J,{title:e.$t("components.titles.componentsList"),backName:"dashboard",backTitle:e.$t("buttons.back"),createName:"components.create",createTitle:e.$t("components.buttons.create"),searchTitle:e.$t("placeholders.search"),modelValue:d.value,"onUpdate:modelValue":s[0]||(s[0]=r=>d.value=r)},null,8,["title","backTitle","createTitle","searchTitle","modelValue"]),g.value?(a(),f(G,{key:0,class:"h-full overflow-y-auto",items:N.value,filter:d.value},{default:k(r=>[l("div",Q,[(a(!0),p(y,null,L(r.item,t=>(a(),f(P,{key:t.id,to:{name:"components.edit",params:{component:t.id}},class:"shadow-lg rounded-lg overflow-hidden border-4 hover:border-blue-200"},{default:k(()=>{var C;return[l("div",W,[l("div",X,[l("span",Y,R(j(H)(t.name)),1)]),l("div",null,[c.value&&((C=o.value)==null?void 0:C.id)===t.id?(a(),f(_,{key:0,icon:"spinner",class:"animate-spin"})):(a(),p("button",{key:1,type:"button",title:e.$t("components.titles.clone"),onClick:M(oe=>T(t),["prevent"]),disabled:c.value},[u(_,{icon:"clone"})],8,Z))])]),u(S,{component:t,class:"flex-1 overflow-hidden"},null,8,["component"])]}),_:2},1032,["to"]))),128))])]),_:1},8,["items","filter"])):I("",!0)]),u(K,{showDialog:m.value,"onUpdate:showDialog":s[1]||(s[1]=r=>m.value=r),title:e.$t("components.dialogs.clone.title"),message:e.$t("components.dialogs.clone.message",{name:(b=o.value)==null?void 0:b.name}),onConfirm:V},null,8,["showDialog","title","message"])],64)}}});export{ue as default};
