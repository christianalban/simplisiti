import{v as P,i as W}from"./helpers-6321440c.js";import{d as I,e as z,r as T,c as v,g as e,E as h,D as X,a as r,i as E,t as i,o as u,_ as U,b as $,j as L,w as _,k as V,p as y,f as N,F,h as Y,G as Z,H as x,q as B}from"./index-63881d29.js";import{D}from"./vuedraggable.umd-3df87a88.js";import{g as ee}from"./ComponentService-33601891.js";import{a as te}from"./ControlTypeSelector.vue_vue_type_script_setup_true_lang-d1653569.js";import{u as oe}from"./ResourceService-a05096a0.js";import{b as se}from"./PageService-31dcdd43.js";const ne=I({__name:"FloatToolbar",props:{position:{type:String,default:"top"},isInvisible:{type:Boolean,default:!1},showLabel:{type:String},hiddeLabel:{type:String}},emits:["update:isInvisible"],setup(t){const c=t,s=z(()=>`position-${c.position}-0`),o=z(()=>{switch(c.position){case"left":return"position-left";case"right":return"position-right";case"top":return"position-top";case"bottom":return"position-bottom"}});return(l,p)=>{const a=T("fa-icon");return u(),v("div",{class:h(["float-toolbar",o.value,s.value,{"float-toolbar-top":t.position==="top","float-toolbar-right":["left","right"].includes(t.position)}])},[e("div",{class:h(["float-toolbar-container",{"float-toolbar-container-vertical":["top","bottom"].includes(t.position)}])},[e("div",{class:h(["float-toolbar-accordion",{"float-toolbar-accordion-contracted":t.isInvisible,"float-toolbar-accordion-contracted-vertical":t.isInvisible&&["top","bottom"].includes(t.position),"float-toolbar-accordion-contracted-horizontal ":t.isInvisible&&["left","right"].includes(t.position)}])},[e("div",{class:h(["float-toolbar-content",{"rounded-top":t.position==="top","rounded-bottom":t.position==="bottom","rounded-left":t.position==="left","rounded-right":t.position==="right"}])},[X(l.$slots,"default",{},void 0,!0)],2)],2),e("div",{class:h(["float-toolbar-buttons",{"float-toolbar-buttons-vertical":t.position==="top","float-toolbar-buttons-horizontal":["left","right"].includes(t.position)}])},[e("button",{class:h(["float-toolbar-button",{"vertical-mode":["left","right"].includes(t.position)}]),type:"button",onClick:p[0]||(p[0]=w=>l.$emit("update:isInvisible",!t.isInvisible))},[r(a,{icon:t.isInvisible?"eye":"eye-slash"},null,8,["icon"]),E(" "+i(t.isInvisible?t.showLabel||l.$t("buttons.show"):t.hiddeLabel||l.$t("buttons.hide")),1)],2)],2)],2)],2)}}});const H=U(ne,[["__scopeId","data-v-531177b2"]]),ie={class:"toolbar-container"},le={class:"toolbar-actions"},ae={type:"submit",class:"button-link"},ce={class:"title"},de={class:"toolbar-route"},re={class:"toolbar-route-input"},ue={class:"label"},pe=["value","placeholder"],me={class:"toolbar-route-input"},be={class:"label"},ve=["value","placeholder"],ge={class:"toolbar-route-input"},fe={class:"label"},he=["value","placeholder"],_e=I({__name:"PageToolbar",props:{showDelete:Boolean,title:String,name:{type:String,default:""},url:{type:String,default:""},pageTitle:{type:String,default:""},pageEditionMode:{type:String,default:"adding-component"}},emits:["delete","update:name","update:pageTitle","update:url"],setup(t){const c=$(!0);return(s,o)=>{const l=T("fa-icon"),p=T("router-link");return u(),L(H,{isInvisible:c.value,"onUpdate:isInvisible":o[4]||(o[4]=a=>c.value=a),showLabel:s.$t("pages.buttons.settings")},{default:_(()=>[e("div",ie,[e("div",le,[r(p,{class:"button-link",to:{name:"pages.index"}},{default:_(()=>[r(l,{icon:"arrow-left"}),E(" "+i(s.$t("buttons.back")),1)]),_:1},8,["to"]),t.showDelete?(u(),v("button",{key:0,onClick:o[0]||(o[0]=a=>s.$emit("delete")),type:"button",class:"button-link danger"},i(s.$t("buttons.delete")),1)):V("",!0),e("button",ae,i(s.$t("buttons.save")),1),e("h1",ce,i(t.title),1)]),e("div",de,[e("div",re,[e("label",ue,i(s.$t("pages.labels.pageName")),1),e("input",{class:"input",type:"text",required:"",value:t.name,onInput:o[1]||(o[1]=a=>s.$emit("update:name",y(P)(a.target))),placeholder:s.$t("pages.placeholders.pageName")},null,40,pe)]),e("div",me,[e("label",be,i(s.$t("pages.labels.pageTitle")),1),e("input",{class:"input",type:"text",value:t.pageTitle,onInput:o[2]||(o[2]=a=>s.$emit("update:pageTitle",y(W)(a.target))),placeholder:s.$t("pages.placeholders.pageTitle")},null,40,ve)]),e("div",ge,[e("label",fe,i(s.$t("pages.labels.pageUrl")),1),e("input",{class:"input",type:"text",value:t.url,onInput:o[3]||(o[3]=a=>s.$emit("update:url",y(P)(a.target))),placeholder:s.$t("pages.placeholders.pageUrl")},null,40,he)])])])]),_:1},8,["isInvisible","showLabel"])}}});const xe=U(_e,[["__scopeId","data-v-e71e5ce8"]]),$e={class:"font-bold"},ye={class:"tile h-24 cursor-pointer"},Ce={class:"tile-title cursor-pointer"},ke=I({__name:"AvailableComponents",setup(t){const c=$([]),s=o=>({id:o.id||1+1,...o,variables:o.variables.map(l=>({...l}))});return N(()=>{ee().then(o=>{c.value=o.data.data})}),(o,l)=>(u(),v(F,null,[e("h2",$e,i(o.$t("pages.titles.availableComponents")),1),r(y(D),{class:"grid grid-cols-2 gap-4",modelValue:c.value,"onUpdate:modelValue":l[0]||(l[0]=p=>c.value=p),group:{name:"components",pull:"clone",put:!1},sort:!1,clone:s,"item-key":"id"},{item:_(({element:p})=>[e("div",ye,[e("label",Ce,i(p.name),1)])]),_:1},8,["modelValue"])],64))}}),Ie={class:"component-configuration-title"},we={key:0,class:"component-configuration-parameters"},Se={class:"flex flex-col gap-2"},Te={class:"label"},Ve=I({__name:"ComponentConfigurationForm",props:{component:{type:Object}},emits:["exit"],setup(t){return(c,s)=>(u(),v(F,null,[e("div",Ie,[e("h2",null,i(c.$t("pages.titles.componentConfigurationForm")),1),e("button",{type:"button",class:"button small default",onClick:s[0]||(s[0]=o=>c.$emit("exit"))},i(c.$t("pages.buttons.exit")),1)]),t.component?(u(),v("div",we,[(u(!0),v(F,null,Y(t.component.variables,o=>(u(),v("div",{key:o.name},[e("div",Se,[e("label",Te,i(o.name)+":",1),r(te,{modelValue:o.default,"onUpdate:modelValue":l=>o.default=l,name:o.name,type:o.type},null,8,["modelValue","onUpdate:modelValue","name","type"])])]))),128))])):V("",!0)],64))}});const Fe=U(Ve,[["__scopeId","data-v-b62449f5"]]),Ue={class:"component-wizard"},Le={class:"page-sections-container"},De={class:"page-sections-content"},Ee={class:"page-sections-item-panel"},Me={class:"page-sections-preview"},Pe=["innerHTML"],ze={class:"page-sections-item-buttons"},Be={class:"page-sections-label"},Ne={class:"pages-secttions-component-buttons"},He=["onClick"],Re=["onClick"],qe={class:"hideable-header"},je={class:"page-sections-buttons"},Ae={class:"text-blue-500 ml-2"},Ge=["onClick"],Oe=I({__name:"Form",props:{sections:{type:Array,default:()=>[]}},emits:["update:sections"],setup(t,{emit:c}){const{loadResources:s}=oe(),o=t,l=$(!0),p=c,a=$(null),w=$(null),S=$("adding-component"),R=()=>{p("update:sections",[...o.sections,{order:0,components:[]}])},q=n=>{const d=[...o.sections];d.splice(n,1),p("update:sections",d)},j=(n,d)=>{n.splice(d,1)},A=(n,d)=>{l.value=!1,S.value="editing-component",a.value=n,w.value=d},G=()=>{l.value=!0,S.value="adding-component",a.value=null,w.value=null},O=n=>n.variables.reduce((b,g)=>{var m;return b.replace(`{{ $${g.name} }}`,((m=g.value)==null?void 0:m.toString())||"")},n.html),J=(n,d)=>{var b,g;return((b=a.value)==null?void 0:b.id)===n.id&&n.order===((g=a.value)==null?void 0:g.order)&&w.value===d},C=document.createElement("link"),K=()=>{const n=se("style");C.rel="stylesheet",C.href=n,document.head.appendChild(C)};return N(()=>{s(),K()}),Z(()=>{C&&document.head.removeChild(C)}),(n,d)=>{const b=T("fa-icon"),g=x("autosize");return u(),v(F,null,[r(H,{isInvisible:l.value,"onUpdate:isInvisible":d[0]||(d[0]=m=>l.value=m),position:"left",showLabel:n.$t("pages.buttons.components")},{default:_(()=>[e("div",Ue,[S.value==="adding-component"?(u(),L(ke,{key:0})):V("",!0),S.value==="editing-component"?(u(),L(Fe,{key:1,component:a.value,onExit:G},null,8,["component"])):V("",!0)])]),_:1},8,["isInvisible","showLabel"]),e("div",Le,[e("div",De,[r(y(D),{list:t.sections,class:"page-sections-panel",onInput:d[1]||(d[1]=m=>n.$emit("update:sections",m)),group:"sections","item-key":"id",handle:".page-sections-grip-lines"},{item:_(({element:m,index:k})=>[e("div",Ee,[r(y(D),{class:"page-sections-dreaggable",modelValue:m.components,"onUpdate:modelValue":f=>m.components=f,group:"components","item-key":"id"},{item:_(({element:f,index:M})=>[e("div",{class:h(["page-sections-item",{"page-sections-item-selected":J(f,k)}])},[B((u(),v("div",Me,[B(e("div",{class:"page-sections-preview-content",innerHTML:O(f)},null,8,Pe),[[g]]),e("div",ze,[e("span",Be,i(n.$t("pages.labels.component"))+" "+i((f.order=M)+1)+" - "+i(f.name),1),e("div",Ne,[e("button",{type:"button",onClick:Q=>j(m.components,M)},[r(b,{icon:"trash"})],8,He),e("button",{type:"button",onClick:Q=>A(f,k)},[r(b,{icon:"file-invoice"})],8,Re)])])])),[[g]])],2)]),header:_(()=>[e("div",qe,[e("p",null,i(n.$t("pages.labels.addComponentsToSection",{section:k+1})),1)])]),_:2},1032,["modelValue","onUpdate:modelValue"]),e("div",je,[e("span",Ae,i(n.$t("pages.labels.section"))+" "+i((m.order=k)+1),1),r(b,{icon:"grip-lines",class:"page-sections-grip-lines"}),e("button",{onClick:f=>q(k)},[r(b,{icon:"trash"})],8,Ge)])])]),_:1},8,["list"]),e("button",{class:"page-sections-buttons-add",onClick:R,type:"button"},[r(b,{icon:"square-plus"}),E(" "+i(n.$t("pages.buttons.addSection")),1)])])])],64)}}});const et=U(Oe,[["__scopeId","data-v-ff1bb19b"]]);export{xe as P,et as a};
