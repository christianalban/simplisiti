import{c as N,a as E,g as I,d as V}from"./ResourceService-0e9e80fe.js";import{v as L}from"./helpers-6321440c.js";import{d as y,g as w,b as M,e as s,t as g,p as O,u as C,r as d,j as U,w as R,s as b,h,bb as T,bu as z,o as A,a as x,F as D,f as G,i as H}from"./index-666b70e9.js";import{_ as j}from"./Modal.vue_vue_type_script_setup_true_lang-1d9c9273.js";import{_ as J}from"./Dialog.vue_vue_type_script_setup_true_lang-d28ad5cf.js";const K={class:"flex flex-col gap-4"},P={class:"flex flex-col gap-2 w-full"},Q={class:"label"},W=["value","placeholder"],X={class:"flex flex-col gap-2 w-full"},Y={class:"label"},Z=["required","placeholder"],B=y({__name:"Form",props:{name:{type:String,required:!0},file:{type:[Object,null],default:null},fileRequired:{type:Boolean,default:!1}},emits:["update:name","update:file"],setup(c,{emit:p}){const o=p,a=e=>{var t;e&&o("update:file",((t=e.files)==null?void 0:t[0])??null)};return(e,t)=>(w(),M("div",K,[s("div",P,[s("label",Q,g(e.$t("resources.labels.resourceName")),1),s("input",{type:"text",value:c.name,required:"",onInput:t[0]||(t[0]=l=>e.$emit("update:name",O(L)(l.target))),class:"input",placeholder:e.$t("resources.placeholders.resourceName")},null,40,W)]),s("div",X,[s("label",Y,g(e.$t("resources.labels.resourceFile")),1),s("input",{type:"file",required:c.fileRequired,onChange:t[1]||(t[1]=l=>a(l.target)),class:"input",placeholder:e.$t("resources.placeholders.resourceFile"),accept:"image/png,image/jpeg"},null,40,Z)])]))}}),ee=y({__name:"Create",props:{showModal:{type:Boolean,required:!0}},emits:["created","update:showModal"],setup(c,{emit:p}){const{t:o}=C(),a=d(""),e=d(void 0),t=p,l=()=>{N({name:a.value,file:e.value}).then(()=>{b({title:o("toasts.success"),message:o("resources.toasts.created"),type:"success"}),t("created"),a.value=""}).catch(()=>{b({title:o("toasts.error"),message:o("resources.toasts.errorCreated"),type:"error"})})};return(v,r)=>(w(),U(j,{title:v.$t("resources.titles.createResource"),showModal:c.showModal,onClose:r[2]||(r[2]=m=>v.$emit("update:showModal",!1)),onConfirm:l},{default:R(()=>[h(B,{name:a.value,"onUpdate:name":r[0]||(r[0]=m=>a.value=m),file:e.value,"onUpdate:file":r[1]||(r[1]=m=>e.value=m),fileRequired:!0},null,8,["name","file"])]),_:1},8,["title","showModal"]))}}),te=y({__name:"Edit",props:{selectedResource:{type:Object,required:!0},showModal:{type:Boolean,required:!0}},emits:["updated","update:selectedResource","update:showModal"],setup(c,{emit:p}){const{t:o}=C(),a=c,e=d(""),t=d(void 0),l=p,v=()=>{r.value&&E({id:r.value.id,name:e.value,file:t.value}).then(()=>{b({title:o("toasts.success"),message:o("resources.toasts.created"),type:"success"}),l("updated"),e.value=""}).catch(()=>{b({title:o("toasts.error"),message:o("resources.toasts.errorCreated"),type:"error"})})},{selectedResource:r}=T(a),m=()=>{l("update:selectedResource",null),l("update:showModal",!1)};return z(r,i=>{e.value=(i==null?void 0:i.name)||""}),(i,_)=>(w(),U(j,{title:i.$t("resources.titles.updateResource"),showModal:c.showModal,onClose:m,onConfirm:v},{default:R(()=>[h(B,{name:e.value,"onUpdate:name":_[0]||(_[0]=$=>e.value=$),file:t.value,"onUpdate:file":_[1]||(_[1]=$=>t.value=$)},null,8,["name","file"])]),_:1},8,["title","showModal"]))}}),se={class:"flex flex-col gap-4 h-screen py-2"},oe={class:"title"},le={class:"flex gap-2"},ae={class:"grid grid-cols-5 gap-4"},re={class:"flex"},ne={type:"button",class:"button primary w-full flex flex-col items-center justify-between"},ue=["src"],ie={class:"flex w-full justify-between mt-4"},de={class:"font-semibold"},ce={class:"flex gap-2"},pe=["onClick"],me=["onClick"],we=y({__name:"Index",setup(c){const p=d([]),o=d(!1),a=d(!1),e=d(!1),t=d(null),{t:l}=C(),v=()=>{o.value=!0},r=()=>{a.value=!0},m=u=>{t.value=u,e.value=!0},i=()=>{I().then(u=>{p.value=u.data.data})},_=u=>{t.value=u,r()},$=()=>{!t.value||!t.value.id||V(t.value.id).then(()=>{b({title:l("toasts.success"),message:l("resources.toasts.deleted"),type:"success"}),i()}).catch(()=>{b({title:l("toasts.error"),message:l("resources.toasts.errorDeleted"),type:"error"})})};return A(()=>{i()}),(u,f)=>{var q;const F=x("router-link"),k=x("fa-icon");return w(),M(D,null,[s("div",se,[s("h1",oe,g(u.$t("resources.titles.resourcesList")),1),s("div",le,[h(F,{class:"button default",to:{name:"dashboard"}},{default:R(()=>[H(g(u.$t("buttons.back")),1)]),_:1}),s("button",{type:"button",class:"button primary",onClick:v},g(u.$t("resources.buttons.create")),1)]),s("ul",ae,[(w(!0),M(D,null,G(p.value,n=>(w(),M("li",re,[s("div",ne,[s("img",{src:n.url,class:"h-32 object-cover"},null,8,ue),s("div",ie,[s("span",de,g(n.name),1),s("div",ce,[s("button",{onClick:S=>_(n)},[h(k,{icon:"edit"})],8,pe),s("button",{onClick:S=>m(n)},[h(k,{icon:"trash"})],8,me)])])])]))),256))])]),h(ee,{showModal:o.value,"onUpdate:showModal":f[0]||(f[0]=n=>o.value=n),onCreated:i},null,8,["showModal"]),h(te,{showModal:a.value,"onUpdate:showModal":f[1]||(f[1]=n=>a.value=n),selectedResource:t.value,"onUpdate:selectedResource":f[2]||(f[2]=n=>t.value=n),onUpdated:i},null,8,["showModal","selectedResource"]),h(J,{showDialog:e.value,"onUpdate:showDialog":f[3]||(f[3]=n=>e.value=n),title:u.$t("resources.dialogs.delete.title"),message:u.$t("resources.dialogs.delete.message",{name:((q=t.value)==null?void 0:q.name)||""}),onConfirm:$},null,8,["showDialog","title","message"])],64)}}});export{we as default};
