import{d as U,o as t,c as a,g as l,t as f,b as S,x as A,e as L,r as E,a as w,w as I,i as G,q as H,C as J,F as C,h as M,f as K,k as q,l as k,z as Q,A as W,j as x}from"./index-e9e65b8b.js";import{_ as O}from"./Modal.vue_vue_type_script_setup_true_lang-f46deb47.js";import{u as X}from"./ResourceService-d46d38fa.js";import{R as T}from"./ResourcePreview-65b3307e.js";import{v as Y}from"./helpers-ddca868d.js";const Z=["value"],ee={value:"text"},te={value:"textarea"},le={value:"resource"},oe={value:"datatable"},ae={value:"datasource"},ne={value:"action"},ue=U({__name:"VariableTypeSelector",props:{modelValue:{type:String,required:!0}},emits:["update:modelValue"],setup(e){const $=n=>n.target.value;return(n,u)=>(t(),a("select",{class:"input",value:e.modelValue,onChange:u[0]||(u[0]=m=>n.$emit("update:modelValue",$(m)))},[l("option",ee,f(n.$t("components.types.text")),1),l("option",te,f(n.$t("components.types.textarea")),1),l("option",le,f(n.$t("components.types.resource")),1),l("option",oe,f(n.$t("components.types.datatable")),1),l("option",ae,f(n.$t("components.types.datasource")),1),l("option",ne,f(n.$t("components.types.action")),1)],40,Z))}}),B=S([]),se=async()=>await A.get("source"),re=async()=>{const e=await se();B.value=e.data.data},ce=()=>({sources:B,loadSources:re}),F=S([]),de=async()=>await A.get("action"),ie=async()=>{const e=await de();F.value=e.data.data},me=()=>({actions:F,loadActions:ie}),pe={class:"w-full flex items-center justify-center max-h-full"},fe={class:"absolute top-1/4 bg-teal-500 rounded-lg text-white text-xs p-1 bg-opacity-50"},ve={class:"flex justify-between mb-4"},he=["placeholder"],Ve={class:"grid grid-cols-3 gap-2 overflow-y-auto max-h-[70vh]"},ye=["onClick"],$e=U({__name:"ResourcePicker",props:{modelValue:{type:[Number,String,Object,void 0],required:!0}},emits:["update:modelValue"],setup(e,{emit:$}){const n=e,u=S(!1),m=S(""),{resources:r,loadResources:c,resourceFromId:v}=X(),j=L(()=>r.value.filter(V=>V.name.toLowerCase().includes(m.value.toLowerCase()))),h=L(()=>{if(n.modelValue!==void 0)return v(+n.modelValue)}),d=$,i=()=>{u.value=!0},p=V=>{d("update:modelValue",V),u.value=!1},N=()=>{c()};return(V,R)=>{var o;const D=E("fa-icon");return t(),a(C,null,[l("button",{onClick:i,type:"button",class:"button secondary flex gap-2 w-full flex-col justify-start !p-1 relative items-center"},[l("div",pe,[w(T,{url:(o=h.value)==null?void 0:o.url},null,8,["url"])]),l("span",fe,f(h.value?V.$t("components.buttons.changeResource"):V.$t("components.buttons.selectResource")),1)]),w(O,{title:V.$t("components.titles.selectResource"),showModal:u.value,"onUpdate:showModal":R[1]||(R[1]=s=>u.value=s),showCancel:!1,confirmLabel:V.$t("buttons.close")},{default:I(()=>[l("div",ve,[l("button",{type:"button",onClick:N,class:"button secondary"},[w(D,{icon:"arrow-rotate-right"}),G(" "+f(V.$t("components.buttons.refresh")),1)]),H(l("input",{type:"search","onUpdate:modelValue":R[0]||(R[0]=s=>m.value=s),class:"input",placeholder:V.$t("placeholders.search")},null,8,he),[[J,m.value]])]),l("div",Ve,[(t(!0),a(C,null,M(j.value,s=>(t(),a("button",{type:"button",onClick:b=>p(s.id),class:"button primary flex flex-col gap-2 justify-center items-center"},[w(T,{url:s.url},null,8,["url"]),l("span",null,f(s.name),1)],8,ye))),256))])]),_:1},8,["title","showModal","confirmLabel"])],64)}}}),be={class:"w-52 flex"},ge={class:"w-full form-group"},we=["value","onInput","placeholder"],Ce=["onClick"],_e=l("th",null," Â  ",-1),ke={class:"w-52 flex"},Se=["onClick"],Re=U({__name:"DataTable",props:{modelValue:{type:[Object,String,Number,void 0],required:!0},name:{type:String,required:!1}},emits:["update:modelValue"],setup(e,{emit:$}){const n=e,u=({type:o,name:s}={type:"text",name:""})=>({name:s,type:o,value:"",default:""}),m=(o="text")=>({name:"",type:o}),r=S([m()]),c=S([[u()]]),v=S(!1),j=$,h=()=>{v.value=!0},d=()=>{j("update:modelValue",{columns:r.value,rows:c.value}),v.value=!1},i=(o,s,b)=>{s.type=b,c.value.forEach(y=>{y[o].type=s.type})},p=(o,s,b)=>{s.name=Y(b),c.value.forEach(y=>{y[o].name=s.name})},N=()=>{r.value.push(m()),c.value.forEach(o=>{o.push(u())})},V=()=>{const o=[];r.value.forEach(({type:s,name:b})=>{o.push(u({type:s,name:b}))}),c.value.push(o)},R=o=>{r.value.splice(o,1),c.value.forEach(s=>{s.splice(o,1)})},D=o=>{c.value.splice(o,1)};return K(()=>{n.modelValue&&typeof n.modelValue=="object"&&(r.value=n.modelValue.columns,c.value=n.modelValue.rows)}),(o,s)=>{const b=E("fa-icon");return t(),a(C,null,[l("button",{onClick:h,type:"button",class:"button secondary flex gap-2 w-full"},[l("span",null,f(o.$t("components.buttons.fillData")),1)]),w(O,{title:o.$t("components.titles.fillData"),showModal:v.value,"onUpdate:showModal":s[0]||(s[0]=y=>v.value=y),showCancel:!1,confirmLabel:o.$t("buttons.close"),resetOnClose:!1,onConfirm:d},{default:I(()=>[l("table",null,[l("thead",null,[l("tr",null,[(t(!0),a(C,null,M(r.value,(y,_)=>(t(),a("th",null,[l("div",be,[l("div",ge,[l("input",{class:"input",type:"text",value:y.name,onInput:g=>p(_,y,g.target),placeholder:o.$t("components.placeholders.dataName")},null,40,we),w(ue,{class:"w-5",modelValue:y.type,"onUpdate:modelValue":g=>i(_,y,g)},null,8,["modelValue","onUpdate:modelValue"]),r.value.length>1?(t(),a("button",{key:0,type:"button",class:"button danger",onClick:g=>R(_)},[w(b,{icon:"minus"})],8,Ce)):q("",!0),_==r.value.length-1?(t(),a("button",{key:1,type:"button",class:"button primary",onClick:N},[w(b,{icon:"plus"})])):q("",!0)])])]))),256)),_e])]),l("tbody",null,[(t(!0),a(C,null,M(c.value,(y,_)=>(t(),a("tr",{key:`${_}:${e.name}`},[(t(!0),a(C,null,M(y,(g,P)=>(t(),a("td",{key:`${e.name}:${r.value[P].name}:${g.name}`},[l("div",ke,[w(Ee,{modelValue:g.default,"onUpdate:modelValue":z=>g.default=z,name:g.name,type:g.type},null,8,["modelValue","onUpdate:modelValue","name","type"])])]))),128)),l("td",null,[c.value.length>1?(t(),a("button",{key:0,type:"button",class:"button danger",onClick:g=>D(_)},[w(b,{icon:"minus"})],8,Se)):q("",!0),_==c.value.length-1?(t(),a("button",{key:1,type:"button",class:"button secondary",onClick:V},[w(b,{icon:"plus"})])):q("",!0)])]))),128))])])]),_:1},8,["title","showModal","confirmLabel"])],64)}}}),qe=["value"],Me={value:""},Ue=["value"],je=U({__name:"DataSource",props:{modelValue:{required:!0},name:{type:String,required:!1}},emits:["update:modelValue"],setup(e,{emit:$}){const{sources:n}=ce(),u=$,m=r=>{const c=r.target;u("update:modelValue",c.value)};return(r,c)=>(t(),a("select",{class:"input w-full",onChange:m,value:e.modelValue},[l("option",Me,f(r.$t("placeholders.select")),1),(t(!0),a(C,null,M(k(n),v=>(t(),a("option",{value:v.name},f(v.name),9,Ue))),256))],40,qe))}}),xe=["value"],Ne={value:""},De=["value"],Le=U({__name:"Action",props:{modelValue:{required:!0},name:{type:String,required:!1}},emits:["update:modelValue"],setup(e,{emit:$}){const{actions:n}=me(),u=$,m=r=>{const c=r.target;u("update:modelValue",c.value)};return(r,c)=>(t(),a("select",{class:"input w-full",onChange:m,value:e.modelValue},[l("option",Ne,f(r.$t("placeholders.select")),1),(t(!0),a(C,null,M(k(n),v=>(t(),a("option",{value:v.name},f(v.name),9,De))),256))],40,xe))}}),Te=["value","placeholder"],Ae=["placeholder"],Ee=U({__name:"ControlTypeSelector",props:{type:{type:String,required:!0},modelValue:{type:[String,Number,Object,null,void 0],required:!0},name:{type:String,required:!0},defaultValue:{type:[String,Number,Object,null,void 0]}},emits:["update:modelValue"],setup(e,{emit:$}){const n=e,u=$,m=d=>{u("update:modelValue",d.target.value)},r=d=>{u("update:modelValue",d)},c=d=>{u("update:modelValue",d)},v=d=>{u("update:modelValue",d)},j=d=>{u("update:modelValue",d)},{type:h}=Q(n);return W(h,()=>{u("update:modelValue","")}),(d,i)=>(t(),a(C,null,[k(h)==="text"?(t(),a("input",{key:0,type:"text",class:"input w-full",value:e.modelValue||e.defaultValue,onInput:i[0]||(i[0]=p=>m(p)),placeholder:d.$t("components.placeholders.defaultValue")},null,40,Te)):q("",!0),k(h)==="textarea"?(t(),a("textarea",{key:1,class:"input w-full",onInput:i[1]||(i[1]=p=>m(p)),placeholder:d.$t("components.placeholders.defaultValue")},f(e.modelValue||e.defaultValue),41,Ae)):k(h)==="resource"?(t(),x($e,{key:2,modelValue:e.modelValue||e.defaultValue,"onUpdate:modelValue":i[2]||(i[2]=p=>r(p))},null,8,["modelValue"])):k(h)==="datatable"?(t(),x(Re,{key:3,name:e.name,modelValue:e.modelValue||e.defaultValue,"onUpdate:modelValue":i[3]||(i[3]=p=>c(p))},null,8,["name","modelValue"])):k(h)==="datasource"?(t(),x(je,{key:4,name:e.name,modelValue:e.modelValue||e.defaultValue,"onUpdate:modelValue":i[4]||(i[4]=p=>v(p))},null,8,["name","modelValue"])):k(h)==="action"?(t(),x(Le,{key:5,name:e.name,modelValue:e.modelValue||e.defaultValue,"onUpdate:modelValue":i[5]||(i[5]=p=>j(p))},null,8,["name","modelValue"])):q("",!0)],64))}});export{ue as _,me as a,Ee as b,ce as u};
