import{c as N,a as E,g as I,d as V}from"./ResourceService-c1d96744.js";import{v as L}from"./helpers-6321440c.js";import{d as M,g as v,b as $,e as s,t as w,p as O,u as C,r as m,j as U,w as R,s as b,h as p,bb as T,bu as P,o as z,a as q,F as D,f as A,i as G}from"./index-e38f943f.js";import{_ as j}from"./Modal.vue_vue_type_script_setup_true_lang-4c4e6400.js";import{_ as H}from"./Dialog.vue_vue_type_script_setup_true_lang-c8984952.js";const J={class:"flex flex-col gap-4"},K={class:"flex flex-col gap-2 w-full"},Q={class:"label"},W=["value","placeholder"],X={class:"flex flex-col gap-2 w-full"},Y={class:"label"},Z=["required","placeholder"],B=M({__name:"Form",props:{name:{type:String,required:!0},file:{type:[Object,null],default:null},fileRequired:{type:Boolean,default:!1}},emits:["update:name","update:file"],setup(r,{emit:c}){const o=c,l=e=>{var t;e&&o("update:file",((t=e.files)==null?void 0:t[0])??null)};return(e,t)=>(v(),$("div",J,[s("div",K,[s("label",Q,w(e.$t("resources.labels.resourceName")),1),s("input",{type:"text",value:r.name,required:"",onInput:t[0]||(t[0]=a=>e.$emit("update:name",O(L)(a.target))),class:"input",placeholder:e.$t("resources.placeholders.resourceName")},null,40,W)]),s("div",X,[s("label",Y,w(e.$t("resources.labels.resourceFile")),1),s("input",{type:"file",required:r.fileRequired,onChange:t[1]||(t[1]=a=>l(a.target)),class:"input",placeholder:e.$t("resources.placeholders.resourceFile"),accept:"image/jpeg,image/svg+xml,image/png,image/webp,video/mp4"},null,40,Z)])]))}}),ee=M({__name:"Create",props:{showModal:{type:Boolean,required:!0}},emits:["created","update:showModal"],setup(r,{emit:c}){const{t:o}=C(),l=m(""),e=m(void 0),t=c,a=()=>{N({name:l.value,file:e.value}).then(()=>{b({title:o("toasts.success"),message:o("resources.toasts.created"),type:"success"}),t("created"),l.value=""}).catch(()=>{b({title:o("toasts.error"),message:o("resources.toasts.errorCreated"),type:"error"})})};return(_,n)=>(v(),U(j,{title:_.$t("resources.titles.createResource"),showModal:r.showModal,onClose:n[2]||(n[2]=f=>_.$emit("update:showModal",!1)),onConfirm:a},{default:R(()=>[p(B,{name:l.value,"onUpdate:name":n[0]||(n[0]=f=>l.value=f),file:e.value,"onUpdate:file":n[1]||(n[1]=f=>e.value=f),fileRequired:!0},null,8,["name","file"])]),_:1},8,["title","showModal"]))}}),te=M({__name:"Edit",props:{selectedResource:{type:Object,required:!0},showModal:{type:Boolean,required:!0}},emits:["updated","update:selectedResource","update:showModal"],setup(r,{emit:c}){const{t:o}=C(),l=r,e=m(""),t=m(void 0),a=c,_=()=>{n.value&&E({id:n.value.id,name:e.value,file:t.value}).then(()=>{b({title:o("toasts.success"),message:o("resources.toasts.created"),type:"success"}),a("updated"),e.value=""}).catch(()=>{b({title:o("toasts.error"),message:o("resources.toasts.errorCreated"),type:"error"})})},{selectedResource:n}=T(l),f=()=>{a("update:selectedResource",null),a("update:showModal",!1)};return P(n,d=>{e.value=(d==null?void 0:d.name)||""}),(d,g)=>(v(),U(j,{title:d.$t("resources.titles.updateResource"),showModal:r.showModal,onClose:f,onConfirm:_},{default:R(()=>[p(B,{name:e.value,"onUpdate:name":g[0]||(g[0]=y=>e.value=y),file:t.value,"onUpdate:file":g[1]||(g[1]=y=>t.value=y)},null,8,["name","file"])]),_:1},8,["title","showModal"]))}}),se=["src"],oe=["src"],le=M({__name:"ResourcePreview",props:{url:{type:String,default:""}},setup(r){return(c,o)=>{var l;return(l=r.url)!=null&&l.match(".mp4")?(v(),$("video",{key:0,src:r.url,class:"h-32 object-cover",controls:""},null,8,se)):(v(),$("img",{key:1,src:r.url,class:"h-32 object-cover"},null,8,oe))}}}),ae={class:"flex flex-col gap-4 h-screen py-2"},re={class:"title"},ne={class:"flex gap-2"},ue={class:"grid grid-cols-5 gap-4"},ie={class:"flex"},de={type:"button",class:"button primary w-full flex flex-col items-center justify-between"},ce={class:"flex w-full justify-between mt-4"},pe={class:"font-semibold"},me={class:"flex gap-2"},fe=["onClick"],he=["onClick"],be=M({__name:"Index",setup(r){const c=m([]),o=m(!1),l=m(!1),e=m(!1),t=m(null),{t:a}=C(),_=()=>{o.value=!0},n=()=>{l.value=!0},f=i=>{t.value=i,e.value=!0},d=()=>{I().then(i=>{c.value=i.data.data})},g=i=>{t.value=i,n()},y=()=>{!t.value||!t.value.id||V(t.value.id).then(()=>{b({title:a("toasts.success"),message:a("resources.toasts.deleted"),type:"success"}),d()}).catch(()=>{b({title:a("toasts.error"),message:a("resources.toasts.errorDeleted"),type:"error"})})};return z(()=>{d()}),(i,h)=>{var x;const S=q("router-link"),k=q("fa-icon");return v(),$(D,null,[s("div",ae,[s("h1",re,w(i.$t("resources.titles.resourcesList")),1),s("div",ne,[p(S,{class:"button default",to:{name:"dashboard"}},{default:R(()=>[G(w(i.$t("buttons.back")),1)]),_:1}),s("button",{type:"button",class:"button primary",onClick:_},w(i.$t("resources.buttons.create")),1)]),s("ul",ue,[(v(!0),$(D,null,A(c.value,u=>(v(),$("li",ie,[s("div",de,[p(le,{url:u.url},null,8,["url"]),s("div",ce,[s("span",pe,w(u.name),1),s("div",me,[s("button",{onClick:F=>g(u)},[p(k,{icon:"edit"})],8,fe),s("button",{onClick:F=>f(u)},[p(k,{icon:"trash"})],8,he)])])])]))),256))])]),p(ee,{showModal:o.value,"onUpdate:showModal":h[0]||(h[0]=u=>o.value=u),onCreated:d},null,8,["showModal"]),p(te,{showModal:l.value,"onUpdate:showModal":h[1]||(h[1]=u=>l.value=u),selectedResource:t.value,"onUpdate:selectedResource":h[2]||(h[2]=u=>t.value=u),onUpdated:d},null,8,["showModal","selectedResource"]),p(H,{showDialog:e.value,"onUpdate:showDialog":h[3]||(h[3]=u=>e.value=u),title:i.$t("resources.dialogs.delete.title"),message:i.$t("resources.dialogs.delete.message",{name:((x=t.value)==null?void 0:x.name)||""}),onConfirm:y},null,8,["showDialog","title","message"])],64)}}});export{be as default};
