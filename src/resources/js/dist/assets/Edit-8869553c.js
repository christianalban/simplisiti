import{d as g,h as _,u as w,B as x,i as d,k as C,r as D,o as y,c as $,a as e,t as l,b as p,w as k,x as N,y as U,p as B,F as S,s as m,l as V}from"./index-2c6d4927.js";import{C as F}from"./Form-617872c6.js";import{_ as M}from"./Dialog.vue_vue_type_script_setup_true_lang-6e8951bd.js";import{b as R,d as T,u as E,m as I}from"./ComponentService-a53a64eb.js";import{c as q}from"./helpers-d1ea3d2b.js";import"./CodeEditor.vue_vue_type_script_setup_true_lang-d0c55c55.js";import"./ResourceService-a2f9024a.js";import"./LocalStorageService-09edb169.js";import"./Modal.vue_vue_type_script_setup_true_lang-0a8cfac7.js";import"./ResourcePreview-06ab6bb5.js";import"./vuedraggable.umd-ef49c065.js";import"./Tabs-1722d844.js";import"./ComponentPreview.vue_vue_type_script_setup_true_lang-88a552d9.js";const L=["onSubmit"],W={class:"flex flex-col mb-4 w-full"},j={class:"title"},z={class:"flex flex-col md:flex-row gap-2 items-end"},A={class:"flex w-full gap-2"},G={class:"flex"},H={type:"submit",class:"button primary"},J={class:"ml-auto flex flex-col gap-2 md:w-1/3"},K={class:"label"},O=["placeholder"],re=g({__name:"Edit",setup(P){const{t:a}=_(),c=w(),u=x(),i=d(!1),r=+c.params.component,t=d({name:"",html:"",variables:[]}),v=()=>{E({id:r,html:t.value.html,variables:I(t.value.variables),name:t.value.name}).then(()=>{q(),m({title:a("toasts.success"),message:a("components.toasts.updated"),type:"success"})}).catch(()=>{m({title:a("toasts.error"),message:a("components.toasts.errorUpdated"),type:"error"})})},f=()=>{i.value=!0},h=()=>{T(r).then(()=>{u.push({name:"components.index"}),m({title:a("toasts.success"),message:a("components.toasts.deleted"),type:"success"})}).catch(()=>{m({title:a("toasts.error"),message:a("components.toasts.errorDeleted"),type:"error"})})};return C(()=>{R(r,{withData:!1}).then(o=>{const s=o.data.data;t.value=s})}),(o,s)=>{const b=D("router-link");return y(),$(S,null,[e("form",{class:"overflow-hidden h-full flex flex-col",onSubmit:B(v,["prevent"])},[e("div",W,[e("h1",j,l(o.$t("components.titles.editComponent")),1),e("div",z,[e("div",A,[e("div",G,[p(b,{class:"button default",to:{name:"components.index"}},{default:k(()=>[V(l(o.$t("buttons.back")),1)]),_:1},8,["to"])]),e("div",null,[e("button",{onClick:f,type:"button",class:"button danger"},l(o.$t("buttons.delete")),1)]),e("div",null,[e("button",H,l(o.$t("buttons.save")),1)])]),e("div",J,[e("label",K,l(o.$t("components.labels.componentName")),1),N(e("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=n=>t.value.name=n),required:"",class:"input",placeholder:o.$t("components.placeholders.componentName")},null,8,O),[[U,t.value.name]])])])]),p(F,{code:t.value.html,"onUpdate:code":s[1]||(s[1]=n=>t.value.html=n),variables:t.value.variables,"onUpdate:variables":s[2]||(s[2]=n=>t.value.variables=n),component:t.value},null,8,["code","variables","component"])],40,L),p(M,{showDialog:i.value,"onUpdate:showDialog":s[3]||(s[3]=n=>i.value=n),title:o.$t("components.dialogs.delete.title"),message:o.$t("components.dialogs.delete.message",{name:t.value.name}),onConfirm:h},null,8,["showDialog","title","message"])],64)}}});export{re as default};
