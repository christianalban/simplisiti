import{d as D,e as r,u as F,f as q,g as L,r as M,o as l,c as f,h as s,a as p,w as U,F as g,s as k,i as y,n as $,t as x,q as E,k as h}from"./index-0d1f3313.js";import{a as G,g as O,f as S,d as P}from"./helpers-315eb150.js";import{_ as j,C as z}from"./ComponentFloatingPreview-01b5b00d.js";import{_ as A}from"./Header.vue_vue_type_script_setup_true_lang-aab7e4c5.js";import{_ as H}from"./Dialog.vue_vue_type_script_setup_true_lang-435bc5e4.js";import"./Accordion.vue_vue_type_script_setup_true_lang-a1ef40dd.js";import"./ComponentPreview.vue_vue_type_script_setup_true_lang-d98e3bdc.js";import"./ResourceService-303ee50b.js";const J={class:"flex flex-col gap-4 h-full py-2"},K={class:"overflow-y-auto"},Q={class:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 py-4"},R=["href"],W={class:"flex items-center gap-2 bg-blue-200 px-2 py-1 w-full"},X={class:"flex flex-col overflow-hidden whitespace-nowrap"},Y=["title"],Z=["title"],I={class:"ml-auto"},ee=["title","onClick","disabled"],se=["href"],te={class:"overflow-hidden w-full aspect-[3/4]"},fe=D({__name:"Index",setup(le){const v=r([]),o=r(null),{t:c}=F(),d=r(!1),u=r(!1),m=r(""),T=e=>{u.value=!0,o.value=e},N=q(()=>G(v.value)),V=e=>e.sections.reduce((a,n)=>a.concat(n.components),[]),_=()=>{O().then(e=>{v.value=e.data.data})},B=()=>{var e;(e=o.value)!=null&&e.id&&(d.value=!0,S(o.value.id).then(()=>{_(),k({title:c("toasts.success"),message:c("pages.toasts.cloned"),type:"success"})}).catch(()=>{k({title:c("toasts.error"),message:c("pages.toasts.errorCloned"),type:"error"})}).finally(()=>{u.value=!1,o.value=null,d.value=!1}))};return L(()=>{_()}),(e,a)=>{var b;const n=M("fa-icon");return l(),f(g,null,[s("div",J,[p(A,{title:e.$t("pages.titles.pagesList"),backName:"dashboard",backTitle:e.$t("buttons.back"),createName:"pages.create",createTitle:e.$t("pages.buttons.create"),searchTitle:e.$t("placeholders.search"),modelValue:m.value,"onUpdate:modelValue":a[0]||(a[0]=i=>m.value=i)},null,8,["title","backTitle","createTitle","searchTitle","modelValue"]),s("div",K,[p(j,{class:"h-full overflow-y-auto",filter:m.value,items:N.value},{default:U(i=>[s("div",Q,[(l(!0),f(g,null,y(i.item,t=>{var w;return l(),f("a",{href:`/spanel/pages/${t.id}`,class:"flex flex-col border-blue-200 shadow-lg rounded-lg border-4 hover:border-blue-200 overflow-hidden"},[s("div",W,[s("div",X,[s("span",{class:"overflow-hidden text-ellipsis font-semibold",title:$(P)(t.name)},x($(P)(t.name)),9,Y),s("span",{class:"overflow-hidden text-ellipsis",title:t.url},x(t.url),9,Z)]),s("div",I,[s("button",{class:"button small default",type:"button",title:e.$t("pages.titles.clone"),onClick:E(C=>T(t),["prevent"]),disabled:d.value},[d.value&&((w=o.value)==null?void 0:w.id)===t.id?(l(),h(n,{key:0,icon:"spinner",class:"animate-spin"})):(l(),h(n,{key:1,icon:"clone"}))],8,ee)]),s("div",null,[s("a",{href:t.url,class:"button small default",target:"_blank"},[p(n,{icon:"up-right-from-square"})],8,se)])]),s("div",te,[(l(!0),f(g,null,y(V(t),C=>(l(),h(z,{component:C},null,8,["component"]))),256))])],8,R)}),256))])]),_:1},8,["filter","items"])])]),p(H,{showDialog:u.value,"onUpdate:showDialog":a[1]||(a[1]=i=>u.value=i),title:e.$t("pages.dialogs.clone.title"),message:e.$t("pages.dialogs.clone.message",{name:(b=o.value)==null?void 0:b.name}),onConfirm:B},null,8,["showDialog","title","message"])],64)}}});export{fe as default};
