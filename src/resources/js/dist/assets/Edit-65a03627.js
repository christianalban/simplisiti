import{d as w,u as D,x as y,q as _,e as m,g as $,r as k,o as U,c as S,h as n,a as c,w as x,t as i,v as B,F,s as u,j as N}from"./index-b02535cd.js";import{C as V}from"./Form-788378d9.js";import{_ as E}from"./Dialog.vue_vue_type_script_setup_true_lang-daf1eabb.js";import{a as I,d as M,u as R,m as T}from"./ComponentService-d8241755.js";import"./CodeEditor.vue_vue_type_script_setup_true_lang-67cd098d.js";import"./helpers-66e66eca.js";import"./ResourceService-063eda53.js";import"./ControlTypeSelector.vue_vue_type_script_setup_true_lang-362d40b2.js";import"./Modal.vue_vue_type_script_setup_true_lang-d959998e.js";import"./ResourcePreview-940a6b68.js";import"./Form.vue_vue_type_script_setup_true_lang-ace29fd4.js";const j=["onSubmit"],q={class:"flex gap-4 mb-4 w-full"},W={class:"title"},z={type:"submit",class:"button primary"},tt=w({__name:"Edit",setup(A){const{t:e}=D(),v=y(),g=_(),l=m(""),a=m(""),p=m(!1),r=m([]),d=+v.params.component,b=()=>{R({id:d,html:l.value,variables:T(r.value),name:a.value}).then(()=>{u({title:e("toasts.success"),message:e("components.toasts.updated"),type:"success"})}).catch(()=>{u({title:e("toasts.error"),message:e("components.toasts.errorUpdated"),type:"error"})})},f=()=>{p.value=!0},h=()=>{M(d).then(()=>{g.push({name:"components.index"}),u({title:e("toasts.success"),message:e("components.toasts.deleted"),type:"success"})}).catch(()=>{u({title:e("toasts.error"),message:e("components.toasts.errorDeleted"),type:"error"})})};return $(()=>{I(d,{withData:!1}).then(o=>{const t=o.data.data;l.value=t.html,a.value=t.name,r.value=t.variables.length?t.variables:[{type:"text",name:"",default:""}]})}),(o,t)=>{const C=k("router-link");return U(),S(F,null,[n("form",{onSubmit:B(b,["prevent"])},[n("div",q,[c(C,{class:"button default",to:{name:"components.index"}},{default:x(()=>[N(i(o.$t("buttons.back")),1)]),_:1},8,["to"]),n("h1",W,i(o.$t("components.titles.editComponent")),1),n("button",{onClick:f,type:"button",class:"button danger ml-auto"},i(o.$t("buttons.delete")),1),n("button",z,i(o.$t("buttons.save")),1)]),c(V,{code:l.value,"onUpdate:code":t[0]||(t[0]=s=>l.value=s),name:a.value,"onUpdate:name":t[1]||(t[1]=s=>a.value=s),variables:r.value,"onUpdate:variables":t[2]||(t[2]=s=>r.value=s)},null,8,["code","name","variables"])],40,j),c(E,{showDialog:p.value,"onUpdate:showDialog":t[3]||(t[3]=s=>p.value=s),title:o.$t("components.dialogs.delete.title"),message:o.$t("components.dialogs.delete.message",{name:a.value}),onConfirm:h},null,8,["showDialog","title","message"])],64)}}});export{tt as default};
