import{d as x,o as $,c as C,h as o,t as y,n as P,l as F,u as _,e as c,k as j,w as D,s as h,a as m,E as H,G as J,g as K,r as B,F as S,i as Q,j as U,y as W,C as X}from"./index-f8b35c1d.js";import{c as Y,a as Z,b as ee,g as te,d as se,e as oe}from"./ResourceService-48f5d890.js";import{v as le}from"./helpers-d1a74e74.js";import{_ as E}from"./Modal.vue_vue_type_script_setup_true_lang-a17e35dd.js";import{_ as q}from"./Dialog.vue_vue_type_script_setup_true_lang-b3685889.js";import{R as ae}from"./ResourcePreview-5c8e1b18.js";const ne={class:"flex flex-col gap-4"},re={class:"flex flex-col gap-2 w-full"},ue={class:"label"},ie=["required","multiple","placeholder"],de={key:0,class:"flex flex-col gap-2 w-full"},ce={class:"label"},pe=["value","placeholder"],N=x({__name:"Form",props:{name:{type:String,required:!0},file:{type:[Array,Object,null],default:null},fileRequired:{type:Boolean,default:!1},uploadType:{type:String,default:"single"}},emits:["update:name","update:file"],setup(u,{emit:b}){const n=u,g=b,r=t=>{var e;if(!t)return;const s=n.uploadType==="single"?(e=t.files)==null?void 0:e[0]:[...t.files??[]];g("update:file",s)};return(t,s)=>($(),C("div",ne,[o("div",re,[o("label",ue,y(t.$t(`resources.labels.${u.uploadType==="single"?"resourceFile":"resourceFiles"}`)),1),o("input",{type:"file",required:u.fileRequired,onChange:s[0]||(s[0]=e=>r(e.target)),class:"input",multiple:u.uploadType==="batch",placeholder:t.$t("resources.placeholders.resourceFile"),accept:"image/jpeg,image/svg+xml,image/png,image/webp,video/mp4,application/pdf,image/gif,application/zip,application/x-7z-compressed,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.ms-powerpoint,application/vnd.openxmlformats-officedocument.presentationml.presentation"},null,40,ie)]),u.uploadType==="single"?($(),C("div",de,[o("label",ce,y(t.$t("resources.labels.resourceName")),1),o("input",{type:"text",value:u.name,onInput:s[1]||(s[1]=e=>t.$emit("update:name",P(le)(e.target))),class:"input",placeholder:t.$t("resources.placeholders.resourceName")},null,40,pe)])):F("",!0)]))}}),me=x({__name:"Create",props:{showModal:{type:Boolean,required:!0},uploadType:{type:String,default:"single"}},emits:["created","update:showModal"],setup(u,{emit:b}){const{t:n}=_(),g=u,r=c(""),t=c(void 0),s=b,e=()=>{(g.uploadType==="single"?w:f)().then(()=>{h({title:n("toasts.success"),message:n("resources.toasts.created"),type:"success"}),s("created"),r.value=""}).catch(()=>{h({title:n("toasts.error"),message:n("resources.toasts.errorCreated"),type:"error"})})},w=()=>Y({name:r.value,file:t.value}),f=()=>Z({file:t.value});return(p,i)=>($(),j(E,{title:p.$t("resources.titles.createResource"),showModal:u.showModal,onClose:i[2]||(i[2]=v=>p.$emit("update:showModal",!1)),onConfirm:e},{default:D(()=>[m(N,{name:r.value,"onUpdate:name":i[0]||(i[0]=v=>r.value=v),file:t.value,"onUpdate:file":i[1]||(i[1]=v=>t.value=v),fileRequired:!0,uploadType:u.uploadType},null,8,["name","file","uploadType"])]),_:1},8,["title","showModal"]))}}),fe=x({__name:"Edit",props:{selectedResource:{type:[Object,null],required:!0},showModal:{type:Boolean,required:!0}},emits:["updated","update:selectedResource","update:showModal"],setup(u,{emit:b}){const{t:n}=_(),g=u,r=c(""),t=c(void 0),s=b,e=()=>{w.value&&ee({id:w.value.id,name:r.value,file:t.value}).then(()=>{h({title:n("toasts.success"),message:n("resources.toasts.created"),type:"success"}),s("updated"),r.value=""}).catch(()=>{h({title:n("toasts.error"),message:n("resources.toasts.errorCreated"),type:"error"})})},{selectedResource:w}=H(g),f=()=>{s("update:selectedResource",null),s("update:showModal",!1)};return J(w,p=>{r.value=(p==null?void 0:p.name)||""}),(p,i)=>($(),j(E,{title:p.$t("resources.titles.updateResource"),showModal:u.showModal,onClose:f,onConfirm:e},{default:D(()=>[m(N,{name:r.value,"onUpdate:name":i[0]||(i[0]=v=>r.value=v),file:t.value,"onUpdate:file":i[1]||(i[1]=v=>t.value=v)},null,8,["name","file"])]),_:1},8,["title","showModal"]))}}),ve={class:"flex flex-col gap-4 h-full py-2"},he={class:"title"},ge={class:"flex gap-2"},we={class:"grid grid-cols-2 md:grid-cols-5 gap-4 overflow-y-auto"},be={class:"flex"},ye={type:"button",class:"rounded border-2 transition-colors border-blue-200 hover:border-blue-500 w-full flex flex-col items-center justify-between overflow-hidden aspect-square"},$e={class:"w-full flex-1 overflow-hidden"},Ce={class:"flex gap-2 w-full h-10 justify-between bg-blue-100 p-2 text-xl md:text-base text-blue-900"},Me={class:"font-semibold flex gap-2 flex-1 text-ellipsis overflow-hidden"},ke=["value"],xe=["onClick"],Re=["onClick"],_e=["onClick"],Fe=x({__name:"Index",setup(u){const b=c([]),n=c(!1),g=c(!1),r=c(!1),t=c(!1),s=c(null),{t:e}=_(),w=c("single"),f=c([]),p=()=>{w.value="single",n.value=!0},i=()=>{w.value="batch",n.value=!0},v=()=>{g.value=!0},V=l=>{s.value=l,r.value=!0},I=()=>{t.value=!0},M=()=>{te().then(l=>{b.value=l.data.data})},A=l=>{s.value=l,v()},L=()=>{!s.value||!s.value.id||se(s.value.id).then(()=>{h({title:e("toasts.success"),message:e("resources.toasts.deleted"),type:"success"}),M()}).catch(()=>{h({title:e("toasts.error"),message:e("resources.toasts.errorDeleted"),type:"error"})})},z=l=>{l.url&&navigator.clipboard.writeText(l.url).then(()=>{h({title:e("toasts.success"),message:e("resources.toasts.urlCopied"),type:"success"})}).catch(()=>{h({title:e("toasts.error"),message:e("resources.toasts.urlErrorCopied"),type:"error"})})},O=()=>{f.value.length!==0&&oe(f.value).then(()=>{h({title:e("toasts.success"),message:e("resources.toasts.deleted"),type:"success"}),M(),f.value=[]}).catch(()=>{h({title:e("toasts.error"),message:e("resources.toasts.errorDeleted"),type:"error"})})};return K(()=>{M()}),(l,d)=>{var T;const G=B("router-link"),R=B("fa-icon");return $(),C(S,null,[o("div",ve,[o("h1",he,y(l.$t("resources.titles.resourcesList")),1),o("div",ge,[m(G,{class:"button default",to:{name:"dashboard"}},{default:D(()=>[U(y(l.$t("buttons.back")),1)]),_:1}),o("button",{type:"button",class:"button primary",onClick:p},y(l.$t("resources.buttons.create")),1),o("button",{type:"button",class:"button primary",onClick:i},y(l.$t("resources.buttons.createBatch")),1),f.value.length?($(),C("button",{key:0,type:"button",onClick:I,class:"button danger"},y(l.$t("buttons.delete")),1)):F("",!0)]),o("ul",we,[($(!0),C(S,null,Q(b.value,a=>($(),C("li",be,[o("div",ye,[o("div",$e,[m(ae,{url:a.url},null,8,["url"])]),o("div",Ce,[o("label",Me,[W(o("input",{type:"checkbox",class:"form-checkbox",value:a==null?void 0:a.id,"onUpdate:modelValue":d[0]||(d[0]=k=>f.value=k)},null,8,ke),[[X,f.value]]),U(" "+y(a.name),1)]),o("button",{onClick:k=>z(a)},[m(R,{icon:"link"})],8,xe),o("button",{onClick:k=>A(a)},[m(R,{icon:"edit"})],8,Re),o("button",{onClick:k=>V(a)},[m(R,{icon:"trash"})],8,_e)])])]))),256))])]),m(me,{showModal:n.value,"onUpdate:showModal":d[1]||(d[1]=a=>n.value=a),onCreated:M,uploadType:w.value},null,8,["showModal","uploadType"]),m(fe,{showModal:g.value,"onUpdate:showModal":d[2]||(d[2]=a=>g.value=a),selectedResource:s.value,"onUpdate:selectedResource":d[3]||(d[3]=a=>s.value=a),onUpdated:M},null,8,["showModal","selectedResource"]),m(q,{showDialog:r.value,"onUpdate:showDialog":d[4]||(d[4]=a=>r.value=a),title:l.$t("resources.dialogs.delete.title"),message:l.$t("resources.dialogs.delete.message",{name:((T=s.value)==null?void 0:T.name)||""}),onConfirm:L},null,8,["showDialog","title","message"]),m(q,{showDialog:t.value,"onUpdate:showDialog":d[5]||(d[5]=a=>t.value=a),title:l.$t("resources.dialogs.delete.title"),message:l.$t("resources.dialogs.delete.batchMessage"),onConfirm:O},null,8,["showDialog","title","message"])],64)}}});export{Fe as default};
