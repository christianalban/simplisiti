import{c as E,a as V,b as A,g as I,d as L}from"./ResourceService-8695aaab.js";import{v as O}from"./helpers-73a2380c.js";import{d as _,o as y,c as M,h as s,t as w,n as z,l as P,u as C,e as p,k as D,w as R,s as b,a as m,D as G,E as H,g as J,r as k,F as B,i as K,j as Q}from"./index-5f5f7cb7.js";import{_ as S}from"./Modal.vue_vue_type_script_setup_true_lang-f62bcc73.js";import{_ as W}from"./Dialog.vue_vue_type_script_setup_true_lang-702f776d.js";import{R as X}from"./ResourcePreview-b4a25d78.js";const Y={class:"flex flex-col gap-4"},Z={class:"flex flex-col gap-2 w-full"},ee={class:"label"},te=["required","multiple","placeholder"],se={key:0,class:"flex flex-col gap-2 w-full"},oe={class:"label"},le=["value","placeholder"],q=_({__name:"Form",props:{name:{type:String,required:!0},file:{type:[Array,Object,null],default:null},fileRequired:{type:Boolean,default:!1},uploadType:{type:String,default:"single"}},emits:["update:name","update:file"],setup(a,{emit:v}){const o=a,f=v,l=e=>{var n;if(!e)return;const t=o.uploadType==="single"?(n=e.files)==null?void 0:n[0]:[...e.files??[]];f("update:file",t)};return(e,t)=>(y(),M("div",Y,[s("div",Z,[s("label",ee,w(e.$t(`resources.labels.${a.uploadType==="single"?"resourceFile":"resourceFiles"}`)),1),s("input",{type:"file",required:a.fileRequired,onChange:t[0]||(t[0]=n=>l(n.target)),class:"input",multiple:a.uploadType==="batch",placeholder:e.$t("resources.placeholders.resourceFile"),accept:"image/jpeg,image/svg+xml,image/png,image/webp,video/mp4,application/pdf,image/gif,application/vnd.rar,application/x-7z-compressed,font/woff,font/woff2,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,font/ttf,image/vnd.microsoft.icon"},null,40,te)]),a.uploadType==="single"?(y(),M("div",se,[s("label",oe,w(e.$t("resources.labels.resourceName")),1),s("input",{type:"text",value:a.name,onInput:t[1]||(t[1]=n=>e.$emit("update:name",z(O)(n.target))),class:"input",placeholder:e.$t("resources.placeholders.resourceName")},null,40,le)])):P("",!0)]))}}),ae=_({__name:"Create",props:{showModal:{type:Boolean,required:!0},uploadType:{type:String,default:"single"}},emits:["created","update:showModal"],setup(a,{emit:v}){const{t:o}=C(),f=a,l=p(""),e=p(void 0),t=v,n=()=>{(f.uploadType==="single"?g:$)().then(()=>{b({title:o("toasts.success"),message:o("resources.toasts.created"),type:"success"}),t("created"),l.value=""}).catch(()=>{b({title:o("toasts.error"),message:o("resources.toasts.errorCreated"),type:"error"})})},g=()=>E({name:l.value,file:e.value}),$=()=>V({file:e.value});return(c,r)=>(y(),D(S,{title:c.$t("resources.titles.createResource"),showModal:a.showModal,onClose:r[2]||(r[2]=u=>c.$emit("update:showModal",!1)),onConfirm:n},{default:R(()=>[m(q,{name:l.value,"onUpdate:name":r[0]||(r[0]=u=>l.value=u),file:e.value,"onUpdate:file":r[1]||(r[1]=u=>e.value=u),fileRequired:!0,uploadType:a.uploadType},null,8,["name","file","uploadType"])]),_:1},8,["title","showModal"]))}}),ne=_({__name:"Edit",props:{selectedResource:{type:[Object,null],required:!0},showModal:{type:Boolean,required:!0}},emits:["updated","update:selectedResource","update:showModal"],setup(a,{emit:v}){const{t:o}=C(),f=a,l=p(""),e=p(void 0),t=v,n=()=>{g.value&&A({id:g.value.id,name:l.value,file:e.value}).then(()=>{b({title:o("toasts.success"),message:o("resources.toasts.created"),type:"success"}),t("updated"),l.value=""}).catch(()=>{b({title:o("toasts.error"),message:o("resources.toasts.errorCreated"),type:"error"})})},{selectedResource:g}=G(f),$=()=>{t("update:selectedResource",null),t("update:showModal",!1)};return H(g,c=>{l.value=(c==null?void 0:c.name)||""}),(c,r)=>(y(),D(S,{title:c.$t("resources.titles.updateResource"),showModal:a.showModal,onClose:$,onConfirm:n},{default:R(()=>[m(q,{name:l.value,"onUpdate:name":r[0]||(r[0]=u=>l.value=u),file:e.value,"onUpdate:file":r[1]||(r[1]=u=>e.value=u)},null,8,["name","file"])]),_:1},8,["title","showModal"]))}}),re={class:"flex flex-col gap-4 h-full py-2"},ue={class:"title"},ie={class:"flex gap-2"},de={class:"grid grid-cols-2 md:grid-cols-5 gap-4 overflow-y-auto"},ce={class:"flex"},pe={type:"button",class:"rounded border-2 transition-colors border-blue-200 hover:border-blue-500 w-full flex flex-col items-center justify-between overflow-hidden h-44"},fe={class:"flex w-full h-10 justify-between bg-blue-100 p-2 text-xl md:text-base text-blue-900"},me={class:"font-semibold text-ellipsis overflow-hidden"},ve={class:"flex gap-2"},he=["onClick"],ge=["onClick"],Ce=_({__name:"Index",setup(a){const v=p([]),o=p(!1),f=p(!1),l=p(!1),e=p(null),{t}=C(),n=p("single"),g=()=>{n.value="single",o.value=!0},$=()=>{n.value="batch",o.value=!0},c=()=>{f.value=!0},r=i=>{e.value=i,l.value=!0},u=()=>{I().then(i=>{v.value=i.data.data})},U=i=>{e.value=i,c()},F=()=>{!e.value||!e.value.id||L(e.value.id).then(()=>{b({title:t("toasts.success"),message:t("resources.toasts.deleted"),type:"success"}),u()}).catch(()=>{b({title:t("toasts.error"),message:t("resources.toasts.errorDeleted"),type:"error"})})};return J(()=>{u()}),(i,h)=>{var T;const j=k("router-link"),x=k("fa-icon");return y(),M(B,null,[s("div",re,[s("h1",ue,w(i.$t("resources.titles.resourcesList")),1),s("div",ie,[m(j,{class:"button default",to:{name:"dashboard"}},{default:R(()=>[Q(w(i.$t("buttons.back")),1)]),_:1}),s("button",{type:"button",class:"button primary",onClick:g},w(i.$t("resources.buttons.create")),1),s("button",{type:"button",class:"button primary",onClick:$},w(i.$t("resources.buttons.createBatch")),1)]),s("ul",de,[(y(!0),M(B,null,K(v.value,d=>(y(),M("li",ce,[s("div",pe,[m(X,{url:d.url},null,8,["url"]),s("div",fe,[s("span",me,w(d.name),1),s("div",ve,[s("button",{onClick:N=>U(d)},[m(x,{icon:"edit"})],8,he),s("button",{onClick:N=>r(d)},[m(x,{icon:"trash"})],8,ge)])])])]))),256))])]),m(ae,{showModal:o.value,"onUpdate:showModal":h[0]||(h[0]=d=>o.value=d),onCreated:u,uploadType:n.value},null,8,["showModal","uploadType"]),m(ne,{showModal:f.value,"onUpdate:showModal":h[1]||(h[1]=d=>f.value=d),selectedResource:e.value,"onUpdate:selectedResource":h[2]||(h[2]=d=>e.value=d),onUpdated:u},null,8,["showModal","selectedResource"]),m(W,{showDialog:l.value,"onUpdate:showDialog":h[3]||(h[3]=d=>l.value=d),title:i.$t("resources.dialogs.delete.title"),message:i.$t("resources.dialogs.delete.message",{name:((T=e.value)==null?void 0:T.name)||""}),onConfirm:F},null,8,["showDialog","title","message"])],64)}}});export{Ce as default};
