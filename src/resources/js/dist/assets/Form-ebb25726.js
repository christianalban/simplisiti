import{v as z,i as oe}from"./helpers-6321440c.js";import{d as F,e as A,r as V,c as b,g as t,E as y,D as ne,a as p,i as B,t as l,o as u,_ as P,b as k,j as T,w as S,k as w,p as I,f as j,F as L,h as se,m as ie,G as ae,H as le,I as ce,J as re,q as O,K as R}from"./index-3f981e9e.js";import{D as M}from"./vuedraggable.umd-64c7abdd.js";import{g as ue,b as J}from"./ComponentService-33756b5e.js";import{a as de}from"./ControlTypeSelector.vue_vue_type_script_setup_true_lang-d4351b44.js";import{u as G}from"./ResourceService-eb2a19c9.js";import{b as pe}from"./PageService-f983c2ef.js";const me=F({__name:"FloatToolbar",props:{position:{type:String,default:"top"},isInvisible:{type:Boolean,default:!1},showLabel:{type:String},hiddeLabel:{type:String}},emits:["update:isInvisible"],setup(e){const a=e,i=A(()=>`position-${a.position}-0`),o=A(()=>{switch(a.position){case"left":return"position-left";case"right":return"position-right";case"top":return"position-top";case"bottom":return"position-bottom"}});return(c,m)=>{const s=V("fa-icon");return u(),b("div",{class:y(["float-toolbar",o.value,i.value,{"float-toolbar-top":e.position==="top","float-toolbar-right":["left","right"].includes(e.position)}])},[t("div",{class:y(["float-toolbar-container",{"float-toolbar-container-vertical":["top","bottom"].includes(e.position)}])},[t("div",{class:y(["float-toolbar-accordion",{"float-toolbar-accordion-contracted":e.isInvisible,"float-toolbar-accordion-contracted-vertical":e.isInvisible&&["top","bottom"].includes(e.position),"float-toolbar-accordion-contracted-horizontal ":e.isInvisible&&["left","right"].includes(e.position)}])},[t("div",{class:y(["float-toolbar-content",{"rounded-top":e.position==="top","rounded-bottom":e.position==="bottom","rounded-left":e.position==="left","rounded-right":e.position==="right"}])},[ne(c.$slots,"default",{},void 0,!0)],2)],2),t("div",{class:y(["float-toolbar-buttons",{"float-toolbar-buttons-vertical":e.position==="top","float-toolbar-buttons-horizontal":["left","right"].includes(e.position),left:e.position==="left",right:e.position==="right"}])},[t("button",{class:y(["float-toolbar-button",{"vertical-mode":["left","right"].includes(e.position)}]),type:"button",onClick:m[0]||(m[0]=h=>c.$emit("update:isInvisible",!e.isInvisible))},[p(s,{icon:e.isInvisible?"eye":"eye-slash"},null,8,["icon"]),B(" "+l(e.isInvisible?e.showLabel||c.$t("buttons.show"):e.hiddeLabel||c.$t("buttons.hide")),1)],2)],2)],2)],2)}}});const K=P(me,[["__scopeId","data-v-3d3dec55"]]),ge={class:"toolbar-container"},ve={class:"toolbar-actions"},be={type:"submit",class:"button-link"},fe={class:"title"},he={class:"toolbar-route"},_e={class:"toolbar-route-input"},$e={class:"label"},ye=["value","placeholder"],Ce={class:"toolbar-route-input"},ke={class:"label"},Se=["value","placeholder"],we={class:"toolbar-route-input"},Te={class:"label"},Ie=["value","placeholder"],Ve=F({__name:"PageToolbar",props:{showDelete:Boolean,title:String,name:{type:String,default:""},url:{type:String,default:""},pageTitle:{type:String,default:""},pageEditionMode:{type:String,default:"adding-component"}},emits:["delete","update:name","update:pageTitle","update:url"],setup(e){const a=k(!0);return(i,o)=>{const c=V("fa-icon"),m=V("router-link");return u(),T(K,{isInvisible:a.value,"onUpdate:isInvisible":o[4]||(o[4]=s=>a.value=s),showLabel:i.$t("pages.buttons.settings")},{default:S(()=>[t("div",ge,[t("div",ve,[p(m,{class:"button-link",to:{name:"pages.index"}},{default:S(()=>[p(c,{icon:"arrow-left"}),B(" "+l(i.$t("buttons.back")),1)]),_:1},8,["to"]),e.showDelete?(u(),b("button",{key:0,onClick:o[0]||(o[0]=s=>i.$emit("delete")),type:"button",class:"button-link danger"},l(i.$t("buttons.delete")),1)):w("",!0),t("button",be,l(i.$t("buttons.save")),1),t("h1",fe,l(e.title),1)]),t("div",he,[t("div",_e,[t("label",$e,l(i.$t("pages.labels.pageName")),1),t("input",{class:"input",type:"text",required:"",value:e.name,onInput:o[1]||(o[1]=s=>i.$emit("update:name",I(z)(s.target))),placeholder:i.$t("pages.placeholders.pageName")},null,40,ye)]),t("div",Ce,[t("label",ke,l(i.$t("pages.labels.pageTitle")),1),t("input",{class:"input",type:"text",value:e.pageTitle,onInput:o[2]||(o[2]=s=>i.$emit("update:pageTitle",I(oe)(s.target))),placeholder:i.$t("pages.placeholders.pageTitle")},null,40,Se)]),t("div",we,[t("label",Te,l(i.$t("pages.labels.pageUrl")),1),t("input",{class:"input",type:"text",value:e.url,onInput:o[3]||(o[3]=s=>i.$emit("update:url",I(z)(s.target))),placeholder:i.$t("pages.placeholders.pageUrl")},null,40,Ie)])])])]),_:1},8,["isInvisible","showLabel"])}}});const vt=P(Ve,[["__scopeId","data-v-e71e5ce8"]]),Fe={class:"font-bold"},Ue={class:"tile h-24 cursor-pointer"},Pe={class:"tile-title cursor-pointer"},De=F({__name:"AvailableComponents",setup(e){const a=k([]),i=o=>({id:o.id||1+1,...o,variables:o.variables.map(c=>({...c}))});return j(()=>{ue().then(o=>{a.value=o.data.data})}),(o,c)=>(u(),b(L,null,[t("h2",Fe,l(o.$t("pages.titles.availableComponents")),1),p(I(M),{class:"grid grid-cols-2 gap-4",modelValue:a.value,"onUpdate:modelValue":c[0]||(c[0]=m=>a.value=m),group:{name:"components",pull:"clone",put:!1},sort:!1,clone:i,"item-key":"id"},{item:S(({element:m})=>[t("div",Ue,[t("label",Pe,l(m.name),1)])]),_:1},8,["modelValue"])],64))}}),Le={class:"form-group"},Be={key:0,class:"component-configuration-parameters"},Ee={class:"component-configuration-label"},Me=F({__name:"ComponentConfigurationForm",props:{component:{type:Object},position:{type:String,default:"left"}},emits:["exit","update:position"],setup(e,{emit:a}){const i=e,o=a,c=()=>{const s=i.position==="left"?"right":"left";o("update:position",s)},m=(s,h)=>{s.content&&(s.content[h]=J(s,h))};return(s,h)=>{const C=V("fa-icon");return u(),b(L,null,[t("div",{class:y(`component-configuration-title ${e.position}`)},[t("h2",null,l(s.$t("pages.titles.componentConfigurationForm")),1),t("div",null,[t("div",Le,[t("button",{type:"button",class:"button small default",onClick:h[0]||(h[0]=_=>s.$emit("exit"))},l(s.$t("pages.buttons.exit")),1),t("button",{type:"button",class:"button small default button-position",onClick:c},[p(C,{icon:"border-top-left"})])])])],2),e.component?(u(),b("div",Be,[(u(!0),b(L,null,se(e.component.variables,_=>(u(),b("div",{key:_.name},[t("div",Ee,[t("label",null,l(_.name)+":",1),p(C,{class:"component-configuration-set-default",icon:"arrows-rotate",onClick:D=>m(e.component,_.name)},null,8,["onClick"])]),e.component.content?(u(),T(de,{key:0,modelValue:e.component.content[_.name],"onUpdate:modelValue":D=>e.component.content[_.name]=D,name:_.name,type:_.type},null,8,["modelValue","onUpdate:modelValue","name","type"])):w("",!0)]))),128))])):w("",!0)],64)}}});const Ne=P(Me,[["__scopeId","data-v-3dd1ea3e"]]),ze=e=>(ae("data-v-e8ede51d"),e=e(),le(),e),Ae=ze(()=>t("hr",null,null,-1)),Oe=F({__name:"PageSectionButtonAdd",emits:["click"],setup(e){return(a,i)=>{const o=V("fa-icon");return u(),b("button",{class:"page-sections-buttons-add",onClick:i[0]||(i[0]=ie(c=>a.$emit("click"),["stop"])),type:"button"},[Ae,t("span",null,[p(o,{icon:"square-plus"}),B(" "+l(a.$t("pages.buttons.addSection")),1)])])}}});const H=P(Oe,[["__scopeId","data-v-e8ede51d"]]),{resourceFromId:Re}=G(),q=e=>typeof e=="string"?e:"",He=e=>(typeof e=="number"||typeof e=="string")&&Re(+e).url||"",qe=(e,a)=>{switch(e){case"text":return q(a);case"resource":return He(a);case"datatable":return a;case"textarea":return q(a)}},je={class:"component-wizard"},Je={class:"page-sections-container"},Ge={class:"page-sections-content"},Ke={class:"page-sections-item-panel"},Qe={class:"page-sections-preview"},We=["innerHTML"],Xe={class:"page-sections-item-buttons"},Ye={class:"page-sections-components-grip-lines"},Ze={class:"pages-secttions-component-buttons"},xe=["onClick"],et=["onClick"],tt={class:"page-sections-label"},ot={class:"hideable-header"},nt={class:"page-sections-buttons"},st={key:1},it={key:2},at=["onClick"],lt=F({__name:"Form",props:{sections:{type:Array,default:()=>[{order:0,components:[]},{order:0,components:[]}]}},emits:["update:sections"],setup(e,{emit:a}){const{loadResources:i}=G(),o=e,c=k(!0),m=a,s=k(null),h=k(null),C=k("adding-component"),_=n=>{const r=[...o.sections];r.splice(n,0,R({order:0,components:[]})),m("update:sections",r)},D=()=>{m("update:sections",[...o.sections,R({order:0,components:[]})])},Q=n=>{const r=[...o.sections];r.splice(n,1),m("update:sections",r)},W=(n,r)=>{n.splice(r,1)},X=(n,r)=>{c.value=!1,C.value="editing-component",s.value=n,h.value=r},Y=()=>{c.value=!0,C.value="adding-component",s.value=null,h.value=null},Z=n=>(n.content=n.content||J(n),n.variables.reduce((f,$)=>{var v;const g=n.content?qe($.type,(v=n.content[$.name])==null?void 0:v.toString()):"";let d="";return typeof g=="string"?d=g:d=JSON.stringify(g),f.replace(`{{ $${$.name} }}`,d||"")},n.html)),x=(n,r)=>{var f,$;return((f=s.value)==null?void 0:f.id)===n.id&&n.order===(($=s.value)==null?void 0:$.order)&&h.value===r},U=document.createElement("link"),ee=()=>{const n=pe("style");U.rel="stylesheet",U.href=n,document.head.appendChild(U)},E=k("left");return j(()=>{i(),ee()}),ce(()=>{U&&document.head.removeChild(U)}),(n,r)=>{const f=V("fa-icon"),$=re("autosize");return u(),b(L,null,[p(K,{isInvisible:c.value,"onUpdate:isInvisible":r[1]||(r[1]=g=>c.value=g),position:E.value,showLabel:n.$t("pages.buttons.components")},{default:S(()=>[t("div",je,[C.value==="adding-component"?(u(),T(De,{key:0})):w("",!0),C.value==="editing-component"?(u(),T(Ne,{key:1,position:E.value,"onUpdate:position":r[0]||(r[0]=g=>E.value=g),component:s.value,onExit:Y},null,8,["position","component"])):w("",!0)])]),_:1},8,["isInvisible","position","showLabel"]),t("div",Je,[t("div",Ge,[p(I(M),{list:e.sections,class:"page-sections-panel",onInput:r[2]||(r[2]=g=>n.$emit("update:sections",g)),group:"sections","item-key":"id",handle:".page-sections-grip-lines"},{item:S(({element:g,index:d})=>[t("div",{class:y(["page-sections-list-content",{"page-sections-list-header":!d,"page-sections-list-footer":d===e.sections.length-1}])},[d?(u(),T(H,{key:0,onClick:v=>_(d)},null,8,["onClick"])):w("",!0),t("div",Ke,[p(I(M),{class:"page-sections-dreaggable",modelValue:g.components,"onUpdate:modelValue":v=>g.components=v,group:"components","item-key":"id",handle:".page-sections-components-grip-lines"},{item:S(({element:v,index:N})=>[t("div",{class:y(["page-sections-item",{"page-sections-item-selected":x(v,d)}])},[O((u(),b("div",Qe,[O(t("div",{class:"page-sections-preview-content",innerHTML:Z(v)},null,8,We),[[$]]),t("div",Xe,[t("button",Ye,[p(f,{icon:"grip"})]),t("div",Ze,[t("button",{type:"button",onClick:te=>W(g.components,N)},[p(f,{icon:"trash"})],8,xe),t("button",{type:"button",onClick:te=>X(v,d)},[p(f,{icon:"file-invoice"})],8,et),t("span",tt,l(n.$t("pages.labels.component"))+" "+l((v.order=N)+1)+" - "+l(v.name),1)])])])),[[$]])],2)]),header:S(()=>[t("div",ot,[t("p",null,l(n.$t("pages.labels.addComponentsToSection",{section:d})),1)])]),_:2},1032,["modelValue","onUpdate:modelValue"]),t("div",nt,[d&&d!==e.sections.length-1?(u(),T(f,{key:0,icon:"grip",class:"page-sections-grip-lines"})):w("",!0),d?(u(),b("span",it,l(n.$t(d===e.sections.length-1?"pages.labels.footer":"pages.labels.section",{section:g.order=d})),1)):(u(),b("span",st,[p(f,{icon:"heading"}),B(" "+l(n.$t("pages.labels.header")),1)])),t("button",{onClick:v=>Q(d)},[p(f,{icon:"trash"})],8,at)])])],2)]),_:1},8,["list"]),p(H,{onClick:D})])])],64)}}});const bt=P(lt,[["__scopeId","data-v-9e8a9783"]]);export{vt as P,bt as a};
