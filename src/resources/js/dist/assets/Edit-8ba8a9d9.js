import{d as y,h as w,B as x,u as $,i as c,k,r as D,o as S,c as C,a as e,t as l,b as m,w as B,n as I,x as N,z as U,p as V,F as A,s as u,l as M}from"./index-da8990b5.js";import{_ as E}from"./Form.vue_vue_type_script_setup_true_lang-53875b05.js";import{_ as F}from"./Dialog.vue_vue_type_script_setup_true_lang-b0071083.js";import{a as R,d as T,b as j}from"./ScriptService-6fe5d415.js";import{v as q}from"./helpers-38280ba3.js";import"./CodeEditor.vue_vue_type_script_setup_true_lang-6de9e055.js";const z=["onSubmit"],G={class:"flex flex-col md:flex-row justify-between items-end"},H={class:"flex flex-col gap-4 mb-4 w-full"},J={class:"title"},K={class:"flex gap-2"},L={type:"submit",class:"button primary"},O={class:"flex gap-4 w-full md:w-auto"},P={class:"flex flex-col gap-2"},Q={class:"label"},W=["value","placeholder"],X={class:"flex flex-col gap-2"},Y={class:"label whitespace-nowrap"},Z=["placeholder"],ne=y({__name:"Edit",setup(ee){const{t:o}=w(),f=x(),v=$(),n=c(""),i=c(""),d=c(!1),r=c(!1),p=+v.params.script,h=()=>{j({id:p,name:i.value,scripts:n.value,is_active:!!r.value}).then(()=>{u({title:o("toasts.success"),message:o("scripts.toasts.updated"),type:"success"})}).catch(()=>{u({title:o("toasts.error"),message:o("scripts.toasts.errorUpdated"),type:"error"})})},_=()=>{d.value=!0},b=()=>{T(p).then(()=>{f.push({name:"scripts.index"}),u({title:o("toasts.success"),message:o("scripts.toasts.deleted"),type:"success"})}).catch(()=>{u({title:o("toasts.error"),message:o("scripts.toasts.errorDeleted"),type:"error"})})};return k(()=>{R(p).then(({data:s})=>{const t=s.data;n.value=t.scripts,i.value=t.name,r.value=t.is_active})}),(s,t)=>{const g=D("router-link");return S(),C(A,null,[e("form",{onSubmit:V(h,["prevent"]),class:"overflow-hidden h-full flex flex-col"},[e("div",G,[e("div",H,[e("h1",J,l(s.$t("scripts.titles.updateScript")),1),e("div",K,[m(g,{class:"button default",to:{name:"scripts.index"}},{default:B(()=>[M(l(s.$t("buttons.back")),1)]),_:1},8,["to"]),e("button",{onClick:_,type:"button",class:"button danger"},l(s.$t("buttons.delete")),1),e("button",L,l(s.$t("buttons.save")),1)])]),e("div",O,[e("div",P,[e("label",Q,l(s.$t("styles.labels.styleName")),1),e("input",{type:"text",value:i.value,required:"",onInput:t[0]||(t[0]=a=>i.value=I(q)(a.target)),class:"input",placeholder:s.$t("styles.placeholders.styleName")},null,40,W)]),e("div",X,[e("label",Y,l(s.$t("styles.labels.styleIsActive")),1),e("div",null,[N(e("input",{type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=a=>r.value=a),class:"checkbox",placeholder:s.$t("styles.placeholders.styleIsActive")},null,8,Z),[[U,r.value]])])])])]),m(E,{code:n.value,"onUpdate:code":t[2]||(t[2]=a=>n.value=a)},null,8,["code"])],40,z),m(F,{showDialog:d.value,"onUpdate:showDialog":t[3]||(t[3]=a=>d.value=a),title:s.$t("scripts.dialogs.delete.title"),message:s.$t("scripts.dialogs.delete.message",{name:i.value}),onConfirm:b},null,8,["showDialog","title","message"])],64)}}});export{ne as default};
